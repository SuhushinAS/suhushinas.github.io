var pokerPlanner;!function(){"use strict";var e,t,n,r={"./src/index.tsx":function(e,t,n){n.r(t);var r=n("./node_modules/@babel/runtime/helpers/esm/jsx.js"),o="/example",a="/",i=n("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),u=n("./node_modules/@babel/runtime/helpers/esm/createClass.js"),s=n("./node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=n("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),d=n("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),f=function(e,t){return function(n){return e(t(n)),n}};function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";(0,i.Z)(this,e),e.host=t}return(0,u.Z)(e,[{key:"getJSON",value:function(e){return e.json()}},{key:"getOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.headers,r=void 0===n?{}:n;return v(v({},e.options),{},{headers:v(v({},e.options.headers),r)},t)}},{key:"request",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;return this.fetch(t,e.host,n)}},{key:"fetch",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return fetch("".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").concat(t),this.getOptions(n)).then((function(t){return e.getJSON(t)}))}))},{key:"requestLocal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.fetch(e,"/planning-poker/local")}}]),e}();(0,d.Z)(p,"host",""),(0,d.Z)(p,"options",{headers:{"Content-Type":"application/json"},method:"GET"});var Z=new p,b=n("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),h=function(e){return function(t){return"".concat(t[e])}},_=h("id"),g=function(e){return function(t){return[e(t),t]}},y=(g(_),function(e){return function(t){return{data:Object.fromEntries(t.map(g(e))),list:t.map(e)}}}),O=(y(_),"/:exampleId"),j="/",k="_id";function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=y(h(k)),P=(0,b.oM)({initialState:{data:{},list:[]},name:"example",reducers:{getList:function(e,t){var n=t.payload;return C(C({},e),S(n.data))}}}),x=(0,b.oM)({initialState:{load:{}},name:"status",reducers:{loadStart:function(e,t){var n=t.payload;e.load[n]=!0},loadStop:function(e,t){var n=t.payload;e.load[n]=!1}}}),N=function(e,t){return function(e,t){return function(n){return e(t),n}}(e,x.actions.loadStop(t))},w=function(e){return e(x.actions.loadStart(P.actions.getList.type)),Z.requestLocal("/api/v1/example.json").then(f(e,P.actions.getList)).then(N(e,P.actions.getList.type))},E=n("./node_modules/react-redux/es/index.js"),M=function(){return(0,E.I0)()},L=E.v9,D=n("./node_modules/react/index.js"),T=n("./node_modules/react-router-dom/dist/index.js"),V=function(e){var t=e.linkText,n=e.linkUrl,o=e.title;return D.createElement(D.Fragment,null,(0,r.Z)("h1",{className:"ExampleHead__Title"},void 0,o),(0,r.Z)("p",{},void 0,(0,r.Z)(T.rU,{to:n},void 0,t)))},F=function(e){var t=e.example;return(0,r.Z)("pre",{className:"ExampleItem"},void 0,JSON.stringify(t,void 0,2))},G=n("./node_modules/lodash.isequal/index.js"),A=n.n(G),R=n("./node_modules/reselect/es/index.js"),B=n("./node_modules/reselect/es/defaultMemoize.js");(0,R.wN)(B.PW,A()),(0,R.wN)(B.PW,E.wU);var W,U,H,q,z,K,J,Y=function(e){return function(t){return function(n){return t(n)[e]}}},X=(Y("data"),Y("list"),function(e){return e[P.name]}),$=function(e){return X(e).data},Q=(0,R.P1)([$,function(e){return X(e).list}],(function(e,t){return t.map((function(t){return e[t]}))})),ee=n("./node_modules/@babel/runtime/helpers/esm/extends.js"),te=function(e){return{defaultMessage:" ",id:e}},ne=n("./node_modules/react-intl/lib/src/components/message.js"),re=function(e){var t=e.id,n=e.values;return D.createElement(ne.Z,(0,ee.Z)({},te(t),{values:n}))},oe=n("./node_modules/react-router/dist/index.js"),ae=function(){var e,t=(0,oe.UO)().exampleId,n=L((e=void 0===t?"":t,function(t){return $(t)[e]}));return D.createElement(D.Fragment,null,(0,r.Z)(V,{linkText:W||(W=(0,r.Z)(re,{id:"example.list.title"})),linkUrl:o,title:n.name}),(0,r.Z)(F,{example:n}))},ie=function(e){return function(e){return e[x.name]}(e).load},ue=function(e){return function(t){return ie(t)[e]}},se=["name","email","age","balance"],ce=function(){var e=L(Q),t=L(ue(P.actions.getList.type));return void 0===t?null:t?U||(U=(0,r.Z)("div",{},void 0,"Loading...")):(0,r.Z)("table",{className:"ExampleList"},void 0,(0,r.Z)("thead",{},void 0,(0,r.Z)("tr",{},void 0,se.map((function(e){return(0,r.Z)("th",{className:"ExampleList__Cell"},e,e)})))),(0,r.Z)("tbody",{},void 0,e.map((function(e){return(0,r.Z)("tr",{},e[k],se.map((function(t){return(0,r.Z)("td",{className:"ExampleList__Cell"},t,(0,r.Z)(T.rU,{to:"".concat(o,"/").concat(e[k])},void 0,"".concat(e[t])))})))}))))},le=function(){return D.createElement(D.Fragment,null,(0,r.Z)(V,{linkText:H||(H=(0,r.Z)(re,{id:"home.title"})),linkUrl:a,title:q||(q=(0,r.Z)(re,{id:"example.list.title"}))}),z||(z=(0,r.Z)(ce,{})))};function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var o=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var fe=function(e){(0,s.Z)(n,e);var t=de(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,u.Z)(n,[{key:"render",value:function(){return(0,r.Z)(oe.Z5,{},void 0,(0,r.Z)(oe.AW,{element:K||(K=(0,r.Z)(le,{})),path:j}),(0,r.Z)(oe.AW,{element:J||(J=(0,r.Z)(ae,{})),path:O}))}},{key:"componentDidMount",value:function(){this.props.dispatch(w)}}]),n}(D.Component);(0,d.Z)(fe,"defaultProps",{});var me,ve,pe=(0,E.$j)()(fe),Ze=n("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),be=n("./node_modules/firebase/auth/dist/esm/index.esm.js"),he=n("./node_modules/firebase/app/dist/esm/index.esm.js"),_e={apiKey:"AIzaSyAMO8Kwj7ChDikQKJzA7KCp-LYkXDFcKYI",appId:"1:241782390439:web:c10021e740161f63d1a582",authDomain:"tst-project-b3fc3.firebaseapp.com",databaseURL:"https://tst-project-b3fc3-default-rtdb.europe-west1.firebasedatabase.app/",messagingSenderId:"241782390439",projectId:"tst-project-b3fc3",storageBucket:"tst-project-b3fc3.appspot.com"},ge=(0,D.createContext)(void 0),ye=function(e){var t=e.children,n=(0,D.useState)(),o=(0,Ze.Z)(n,2),a=o[0],i=o[1];return(0,D.useEffect)((function(){return void 0===a&&i((0,he.ZF)(_e)),function(){void 0!==a&&((0,he.P2)(a),i(void 0))}}),[a]),void 0===a?null:(0,r.Z)(ge.Provider,{value:a},void 0,t)},Oe=function(){var e=(0,D.useContext)(ge);if(void 0===e)throw new Error("useFirebaseAppContext can only be used in a FirebaseAppProvider");return e},je=(0,D.createContext)(void 0),ke=function(e){var t=e.children,n=Oe(),o=(0,D.useState)(),a=(0,Ze.Z)(o,2),i=a[0],u=a[1];return(0,D.useEffect)((function(){u((0,be.v0)(n))}),[n]),void 0===i?null:(0,r.Z)(je.Provider,{value:i},void 0,t)},Ie=(0,D.createContext)(void 0),Ce=function(e){var t=e.children,n=function(){var e=(0,D.useContext)(je);if(void 0===e)throw new Error("useAuthContext can only be used in a AuthProvider");return e}(),o=(0,D.useState)(),a=(0,Ze.Z)(o,2),i=a[0],u=a[1];return(0,D.useEffect)((function(){(0,be.XB)(n).then((function(e){var t=e.user;return u(t)}))}),[n]),void 0===i?null:(0,r.Z)(Ie.Provider,{value:i},void 0,t)},Se=function(){var e=(0,D.useContext)(Ie);if(void 0===e)throw new Error("useAnonymouslyContext can only be used in a AnonymouslyProvider");return e},Pe=n("./node_modules/firebase/database/dist/esm/index.esm.js"),xe=(0,D.createContext)(void 0),Ne=function(e){var t=e.children,n=Oe(),o=(0,D.useState)(),a=(0,Ze.Z)(o,2),i=a[0],u=a[1];return(0,D.useEffect)((function(){u((0,Pe.N8)(n))}),[n]),void 0===i?null:(0,r.Z)(xe.Provider,{value:i},void 0,t)},we=n("./node_modules/firebase/firestore/dist/esm/index.esm.js"),Ee=(0,D.createContext)(void 0),Me=function(e){var t=e.children,n=Oe(),o=(0,D.useState)(),a=(0,Ze.Z)(o,2),i=a[0],u=a[1];return(0,D.useEffect)((function(){return u((0,we.ad)(n)),function(){return u(void 0)}}),[n]),void 0===i?null:(0,r.Z)(Ee.Provider,{value:i},void 0,t)},Le=function(){var e=(0,D.useContext)(Ee);if(void 0===e)throw new Error("useFirestoreContext can only be used in a FirestoreProvider");return e},De=function(e){var t=e.children;return(0,r.Z)(ye,{},void 0,(0,r.Z)(ke,{},void 0,(0,r.Z)(Ce,{},void 0,(0,r.Z)(Me,{},void 0,(0,r.Z)(Ne,{},void 0,t)))))},Te=function(e){var t=Le();return(0,D.useMemo)((function(){return(0,we.hJ)(t,e)}),[t,e])},Ve=n("./node_modules/react-hook-form/dist/index.esm.mjs"),Fe=function(e){var t=e.children,n=e.defaultValues,o=e.onSubmit,a=(0,Ve.cI)({defaultValues:n});return D.createElement(Ve.RV,a,(0,r.Z)("form",{onSubmit:a.handleSubmit(o)},void 0,t))},Ge=function(e){var t=e.children,n=e.title;return(0,r.Z)("table",{className:"Table"},void 0,n&&(0,r.Z)("caption",{className:"Table__Title"},void 0,n),(0,r.Z)("tbody",{},void 0,t))},Ae=n("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),Re=["className"],Be=function(e){var t=e.className,n=void 0===t?"":t,r=(0,Ae.Z)(e,Re),o=(0,D.useMemo)((function(){var e=n.split(" ");return e.push("Button"),e.join(" ")}),[n]);return D.createElement("button",(0,ee.Z)({className:o},r))},We=function(e){var t=(0,Ve.Gc)().formState,n=t.isDirty,r=t.isLoading,o=t.isSubmitting,a=t.isValid,i=t.isValidating;return D.createElement(Be,(0,ee.Z)({className:"Button_Primary",disabled:!n||r||o||!a||i},e))},Ue=["className","id","name"],He=function(e){var t=e.className,n=void 0===t?"":t,r=e.id,o=e.name,a=(0,Ae.Z)(e,Ue),i=(0,Ve.Gc)().control,u=(0,Ve.bc)({control:i,name:o}).field,s=(0,D.useMemo)((function(){var e=n.split(" ");return e.push("Input"),e.join(" ")}),[n]);return D.createElement("input",(0,ee.Z)({className:s,id:null!=r?r:o},u,a))},qe=function(e){var t=e.children,n=e.htmlFor;return(0,r.Z)("label",{className:"Label",htmlFor:n},void 0,t)},ze=n("./node_modules/react-intl/src/components/message.js"),Ke=function(){return me||(me=(0,r.Z)("div",{className:"box"},void 0,(0,r.Z)(Ge,{},void 0,(0,r.Z)("tr",{},void 0,(0,r.Z)("td",{className:"AuthForm__Cell"},void 0,(0,r.Z)(qe,{htmlFor:"title"},void 0,(0,r.Z)(ze.Z,{id:"game.title"})))),(0,r.Z)("tr",{},void 0,(0,r.Z)("td",{className:"AuthForm__Cell"},void 0,(0,r.Z)(He,{name:"title"}))),(0,r.Z)("tr",{},void 0,(0,r.Z)("td",{className:"AuthForm__Cell"},void 0,(0,r.Z)(We,{},void 0,(0,r.Z)(ze.Z,{id:"form.save"})))))))},Je="/",Ye="/:gameId",Xe=n("./node_modules/@remix-run/router/dist/router.js");function $e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var et,tt,nt,rt=function(e){var t=e.optionSetList,n=(0,oe.s0)(),o=Se(),a=Te("game"),i=(0,D.useMemo)((function(){var e={title:""};return 1===t.length&&(e.optionList=t[0].optionList),e}),[t]),u=(0,D.useCallback)((function(e){return(0,we.ET)(a,Qe(Qe({},e),{},{createDate:(0,we.Bt)(),creatorId:o.uid})).then((function(e){n((0,Xe.Gn)(Ye,{gameId:e.id}))}))}),[o.uid,a,n]);return(0,r.Z)(Fe,{defaultValues:i,onSubmit:u},void 0,ve||(ve=(0,r.Z)(Ke,{})))},ot=function(){var e=function(){var e=(0,D.useState)(),t=(0,Ze.Z)(e,2),n=t[0],r=t[1],o=Te("optionSet");return(0,D.useEffect)((function(){return(0,we.cf)(o,(function(e){r(e.docs.map((function(e){return e.data()})))}))}),[o]),n}();return void 0===e?null:(0,r.Z)(rt,{optionSetList:e})},at=function(e,t){var n=Le();return(0,D.useMemo)((function(){return(0,we.JU)(n,e,t)}),[n,e,t])},it=-1,ut=function(e){var t=e.isVoted,n=e.taskId,o=e.votes,a=at("task",n),i=(0,D.useMemo)((function(){return Object.values(o).some((function(e){return e!==it}))}),[o]),u=(0,D.useMemo)((function(){return t?"game.reset":"game.reveal"}),[t]),s=(0,D.useCallback)((function(){return t?(0,we.r7)(a,{isVoted:!1,votes:{}}):(0,we.r7)(a,{isVoted:!0})}),[t,a]);return(0,r.Z)(Be,{className:"Button_Primary",disabled:!i,onClick:s,type:"button"},void 0,(0,r.Z)(re,{id:u}))},st=function(e){var t=e.isVoted,n=e.option,o=e.taskId,a=e.userId,i=e.vote,u=at("task",o),s=(0,D.useCallback)((function(){(0,we.r7)(u,(0,d.Z)({},"votes.".concat(a),n))}),[n,u,a]);return(0,r.Z)(Be,{className:"Button_Primary",disabled:t||i===n,onClick:s,type:"button"},void 0,n===it?" ":n)},ct=function(e){var t=e.game,n=e.taskData,o=e.taskId,a=e.userId;return void 0===n?null:(0,r.Z)(Ge,{},void 0,(0,r.Z)("tr",{},void 0,t.optionList.map((function(e){return(0,r.Z)("td",{className:"GameItemControl__Cell GameItemControl__Cell_Vote"},e,(0,r.Z)(st,{isVoted:n.isVoted,option:e,taskId:o,userId:a,vote:n.votes[a]},e))})),(0,r.Z)("td",{className:"GameItemControl__Cell GameItemControl__Cell_Vote"},void 0,(0,r.Z)(st,{isVoted:n.isVoted,option:it,taskId:o,userId:a,vote:n.votes[a]}))),t.creatorId===a&&(0,r.Z)("tr",{},void 0,(0,r.Z)("td",{className:"GameItemControl__Cell GameItemControl__Cell_Reveal",colSpan:t.optionList.length+1},void 0,(0,r.Z)(ut,{isVoted:n.isVoted,taskId:o,votes:n.votes}))))},lt=function(e){var t=(0,D.useState)(),n=(0,Ze.Z)(t,2),r=n[0],o=n[1],a=at("user",e);return(0,D.useEffect)((function(){return(0,we.cf)(a,o)}),[a]),r},dt=function(e){var t=function(){var e=(0,D.useContext)(xe);if(void 0===e)throw new Error("useDatabaseContext can only be used in a DatabaseProvider");return e}();return(0,D.useMemo)((function(){return(0,Pe.iH)(t,e)}),[t,e])},ft=function(e,t){return(0,D.useEffect)((function(){return(0,Pe.jM)(e,t)}),[t,e])},mt=function(e){var t=e.gameId,n=e.isCreator,o=e.isSelf,a=e.isVoted,i=e.memberId,u=e.votes,s=lt(i),c=function(e){var t=dt("user/".concat(e)),n=(0,D.useState)(),r=(0,Ze.Z)(n,2),o=r[0],a=r[1];return ft(t,(function(e){return a(e.val())})),o}(i),l=(0,D.useMemo)((function(){var e=["GameMember__Name"];return n&&e.push("GameMember__Name_Creator"),o&&e.push("GameMember__Name_Self"),e.join(" ")}),[n,o]),d=(0,D.useMemo)((function(){var e,t=null!==(e=u[i])&&void 0!==e?e:it;return it===t?"":a?t:"#"}),[a,i,u]);if(void 0===s||c!==t||!s.exists())return null;var f=s.data().name;return(0,r.Z)("tr",{className:"GameMember"},void 0,(0,r.Z)("td",{className:"GameMember__Cell GameMember__Cell_Name"},void 0,(0,r.Z)("p",{className:l,title:f},void 0,f)),(0,r.Z)("td",{className:"GameMember__Cell GameMember__Cell_Vote"},void 0,(0,r.Z)("p",{},void 0,d)))},vt=function(e){var t=e.game,n=e.gameId,o=e.taskData,a=e.title,i=e.userId;return(0,r.Z)(Ge,{title:(0,r.Z)("h5",{},void 0,a)},void 0,Object.keys(t.memberIds).map((function(e){return(0,r.Z)(mt,{gameId:n,isCreator:t.creatorId===e,isSelf:i===e,isVoted:o.isVoted,memberId:e,votes:o.votes},e)})))},pt=function(e){var t=e.game,n=e.gameId,o=e.taskData,a=e.userId;return void 0===o?null:(0,r.Z)(vt,{game:t,gameId:n,taskData:o,title:o.title,userId:a})},Zt=function(){return et||(et=(0,r.Z)("div",{},void 0,(0,r.Z)("h5",{},void 0,(0,r.Z)(re,{id:"gameTask.empty.title"})),(0,r.Z)("div",{},void 0,(0,r.Z)(re,{id:"gameTask.empty.description"}))))},bt=function(e){var t=e.game,n=e.gameId,o=e.taskId,a=e.userId,i=function(e){var t=(0,D.useState)(),n=(0,Ze.Z)(t,2),r=n[0],o=n[1],a=at("task",e);return(0,D.useEffect)((function(){return(0,we.cf)(a,o)}),[a]),r}(o),u=(0,D.useMemo)((function(){if(void 0!==i&&i.exists())return i.data()}),[i]);return D.createElement(D.Fragment,null,(0,r.Z)(pt,{game:t,gameId:n,taskData:u,userId:a}),(0,r.Z)(ct,{game:t,taskData:u,taskId:o,userId:a}))},ht=function(e){var t=e.game,n=e.gameId,o=e.taskId,a=e.userId;return void 0===o?tt||(tt=(0,r.Z)(Zt,{})):(0,r.Z)(bt,{game:t,gameId:n,taskId:o,userId:a})},_t=n("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),gt=n("./node_modules/@babel/runtime/regenerator/index.js"),yt=n.n(gt),Ot=n("./node_modules/react-intl/lib/src/components/useIntl.js"),jt=function(e,t){var n=(0,Ot.Z)();return(0,D.useMemo)((function(){return function(e){return function(t,n){return e.formatMessage(te(t),n)}}(n)(e,t)}),[e,n,t])},kt=function(e){var t=e.defaultValues,n=(0,Ve.cI)({defaultValues:t}),o=jt("task.title"),a=(0,D.useCallback)(function(){var r=(0,_t.Z)(yt().mark((function r(o){return yt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.onSubmit(o);case 2:n.reset(t);case 3:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),[t,n,e]);return D.createElement(Ve.RV,n,(0,r.Z)("form",{onSubmit:n.handleSubmit(a)},void 0,(0,r.Z)(Ge,{},void 0,(0,r.Z)("tr",{},void 0,(0,r.Z)("td",{className:"TaskForm__Cell TaskForm__Cell_Title"},void 0,(0,r.Z)(He,{className:"TaskForm__Input",name:"title",placeholder:o})),nt||(nt=(0,r.Z)("td",{className:"TaskForm__Cell TaskForm__Cell_Control"},void 0,(0,r.Z)(We,{},void 0,"+")))))))};function It(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?It(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var St,Pt,xt,Nt,wt,Et,Mt,Lt,Dt=function(e){var t=e.creatorId,n=e.gameId,o=(0,D.useMemo)((function(){return{creatorId:t,gameId:n,isVoted:!1,title:"",votes:{}}}),[t,n]),a=Te("task"),i=at("game",n),u=(0,D.useCallback)((function(e){return(0,we.r7)(i,{taskId:e.id})}),[i]),s=(0,D.useCallback)((function(e){return(0,we.ET)(a,Ct(Ct({},e),{},{createDate:(0,we.Bt)()})).then(u)}),[u,a]);return(0,r.Z)(kt,{defaultValues:o,onSubmit:s})},Tt=function(){return St||(St=(0,r.Z)("div",{},void 0,(0,r.Z)("h5",{},void 0,(0,r.Z)(re,{id:"task.empty.title"})),(0,r.Z)("div",{},void 0,(0,r.Z)(re,{id:"task.empty.description"}))))},Vt=function(e){var t=e.game,n=e.gameId,o=e.isCreator,a=e.task,i=e.taskId,u=e.taskIdSelect,s=at("game",n),c=at("task",i),l=(0,D.useMemo)((function(){var e=["TaskItem"];return i===t.taskId&&e.push("TaskItem_Current"),e.join(" ")}),[t.taskId,i]),d=(0,D.useMemo)((function(){var e=Object.values(a.votes).filter((function(e){return e!==it})),t=e.length;return 0===t?" ":a.isVoted?Math.round(e.reduce((function(e,t){return e+t}),0)/t):"#"}),[a]),f=(0,D.useCallback)((function(){return(0,we.r7)(s,{taskId:i})}),[s,i]),m=(0,D.useCallback)((function(){return i===t.taskId&&(void 0===u?(0,we.r7)(s,{taskId:(0,we.AK)()}):(0,we.r7)(s,{taskId:u})),(0,we.oe)(c)}),[t.taskId,s,c,i,u]);return(0,r.Z)("tr",{className:l},void 0,(0,r.Z)("td",{className:"TaskItem__Cell"},void 0,o?(0,r.Z)(Be,{className:"Button_Primary",disabled:i===t.taskId,onClick:f,title:a.title,type:"button"},void 0,(0,r.Z)("span",{className:"TaskItem__TitleInner"},void 0,a.title)):(0,r.Z)("span",{className:"TaskItem__Title",title:a.title},void 0,(0,r.Z)("span",{className:"TaskItem__TitleInner"},void 0,a.title))),(0,r.Z)("td",{className:"TaskItem__Cell TaskItem__Cell_Control"},void 0,d),o&&(0,r.Z)("td",{className:"TaskItem__Cell TaskItem__Cell_Control"},void 0,(0,r.Z)(Be,{className:"Button_Primary",onClick:m,type:"button"},void 0,"×")))},Ft=new Date(0),Gt=function(e){var t=e.createDate;return[void 0===t?we.EK.fromDate(Ft):t,e.title].join("_")},At=function(e){var t=e.game,n=e.gameId,o=e.isCreator,a=e.taskList,i=(0,D.useMemo)((function(){var e=a.map((function(e){return{data:e.data(),id:e.id}}));return e.sort((function(e,t){var n=Gt(e.data),r=Gt(t.data);return n===r?0:n>r?1:-1})),e}),[a]);return(0,r.Z)(Ge,{title:Pt||(Pt=(0,r.Z)("h5",{},void 0,(0,r.Z)(re,{id:"task.list.title"})))},void 0,i.map((function(e,a){var u,s=null!==(u=i[a+1])&&void 0!==u?u:i[a-1];return(0,r.Z)(Vt,{game:t,gameId:n,isCreator:o,task:e.data,taskId:e.id,taskIdSelect:null==s?void 0:s.id},e.id)})))},Rt=function(e){var t=(0,D.useState)(),n=(0,Ze.Z)(t,2),r=n[0],o=n[1],a=(0,D.useMemo)((function(){return(0,we.ar)("gameId","==",e)}),[e]),i=function(e,t){return(0,D.useMemo)((function(){return(0,we.IO)(e,t)}),[e,t])}(Te("task"),a);return(0,D.useEffect)((function(){return(0,we.cf)(i,o)}),[i]),r},Bt=function(e){var t=e.creatorId,n=e.game,o=e.gameId,a=e.userId,i=Rt(o),u=a===t;return void 0===i?null:(0,r.Z)("div",{},void 0,(0,r.Z)("div",{},void 0,i.empty?xt||(xt=(0,r.Z)(Tt,{})):(0,r.Z)(At,{game:n,gameId:o,isCreator:u,taskList:i.docs})),u&&(0,r.Z)("div",{},void 0,(0,r.Z)(Dt,{creatorId:t,gameId:o})))},Wt=function(e){var t=e.game,n=e.gameId;!function(e){var t=Se(),n=at("game",e);(0,D.useEffect)((function(){(0,we.r7)(n,(0,d.Z)({},"memberIds.".concat(t.uid),!0))}),[t.uid,n])}(n),function(e){var t=Se(),n=dt(".info/connected"),r=dt("user/".concat(t.uid));ft(n,(function(t){!0===t.val()&&(0,Pe.ae)(r).remove().then((function(){(0,Pe.t8)(r,e)}))}))}(n);var o=(0,D.useMemo)((function(){return t.data()}),[t]),a=Se().uid;return(0,r.Z)("div",{className:"GameItemContent"},void 0,(0,r.Z)("div",{className:"GameItemContent__Header box"},void 0,(0,r.Z)("h3",{className:"GameItemContent__Title"},void 0,o.title," (",o.createDate.toDate().toLocaleDateString(),")")),(0,r.Z)("div",{className:"GameItemContent__Main box"},void 0,(0,r.Z)("div",{className:"box__row"},void 0,(0,r.Z)("div",{className:"GameItemContent__MemeberList box__col box__col_xs_12 box__col_sm_5"},void 0,(0,r.Z)(ht,{game:o,gameId:n,taskId:o.taskId,userId:a})),(0,r.Z)("div",{className:"GameItemContent__TaskList box__col box__col_xs_12 box__col_sm_7"},void 0,(0,r.Z)(Bt,{creatorId:o.creatorId,game:o,gameId:n,userId:a})))))},Ut=function(){var e=(0,oe.UO)().gameId,t=void 0===e?"":e,n=function(e){var t=(0,D.useState)(),n=(0,Ze.Z)(t,2),r=n[0],o=n[1],a=at("game",e);return(0,D.useEffect)((function(){return(0,we.cf)(a,o)}),[a]),r}(t);return void 0===n?null:n.exists()?(0,r.Z)(Wt,{game:n,gameId:t}):(0,r.Z)(oe.Fg,{to:a})},Ht=function(){return Nt||(Nt=(0,r.Z)("div",{className:"box"},void 0,(0,r.Z)(Ge,{},void 0,(0,r.Z)("tr",{},void 0,(0,r.Z)("td",{className:"AuthForm__Cell"},void 0,(0,r.Z)(qe,{htmlFor:"name"},void 0,(0,r.Z)(re,{id:"user.name"})))),(0,r.Z)("tr",{},void 0,(0,r.Z)("td",{className:"AuthForm__Cell"},void 0,(0,r.Z)(He,{name:"name"}))),(0,r.Z)("tr",{},void 0,(0,r.Z)("td",{className:"AuthForm__Cell"},void 0,(0,r.Z)(We,{},void 0,(0,r.Z)(re,{id:"form.save"})))))))},qt=function(){var e=Se(),t=at("user",e.uid),n=(0,D.useMemo)((function(){return{name:""}}),[]),o=(0,D.useCallback)((function(e){return(0,we.pl)(t,e)}),[t]);return(0,r.Z)(Fe,{defaultValues:n,onSubmit:o},void 0,wt||(wt=(0,r.Z)(Ht,{})))},zt=function(){var e,t=(e=Se(),lt(e.uid));return void 0===t?null:t.exists()?(0,r.Z)(oe.Z5,{},void 0,(0,r.Z)(oe.AW,{element:Mt||(Mt=(0,r.Z)(ot,{})),path:"".concat(Je,"/*")}),(0,r.Z)(oe.AW,{element:Lt||(Lt=(0,r.Z)(Ut,{})),path:Ye})):Et||(Et=(0,r.Z)(qt,{}))},Kt=n("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),Jt=n("./node_modules/baron/src/core.js"),Yt=n.n(Jt);function Xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xt(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var o=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var en=0!==function(){var e=document.createElement("div");e.style.visibility="hidden",e.style.overflow="scroll",e.style.setProperty("msOverflowStyle","scrollbar"),document.body.appendChild(e);var t=document.createElement("div");e.appendChild(t);var n=e.offsetWidth-t.offsetWidth;return e.parentNode&&e.parentNode.removeChild(e),n}();function tn(e){return"bar_".concat(e)}function nn(e){return"track_".concat(e)}var rn,on,an,un,sn,cn=function(e){(0,s.Z)(n,e);var t=Qt(n);function n(e){var r;return(0,i.Z)(this,n),r=t.call(this,e),(0,d.Z)((0,Kt.Z)(r),"instanceList",[]),(0,d.Z)((0,Kt.Z)(r),"isMount",!1),(0,d.Z)((0,Kt.Z)(r),"references",{scroll:D.createRef(),scroller:D.createRef()}),(0,d.Z)((0,Kt.Z)(r),"updateOnLayoutChange",function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];var u=r&&!n;clearTimeout(n),n=setTimeout((function(){n=null,r||e.apply(void 0,a)}),t),u&&e.apply(void 0,a)}}((function(){r.isMount&&r.instanceList.forEach(r.update)}),300)),(0,d.Z)((0,Kt.Z)(r),"referencesInit",(function(e,t){var n;return $t($t({},e),{},(n={},(0,d.Z)(n,tn(t),D.createRef()),(0,d.Z)(n,nn(t),D.createRef()),n))})),(0,d.Z)((0,Kt.Z)(r),"renderScrollbar",(function(e){return D.createElement("div",{className:"Scroll__Track Scroll__Track_".concat(e),key:e,ref:r.references[nn(e)]},D.createElement("div",{className:"Scroll__Bar Scroll__Bar_".concat(e),ref:r.references[tn(e)]}))})),(0,d.Z)((0,Kt.Z)(r),"scrollInit",(function(e){return Yt()({bar:r.references[tn(e)].current,barOnCls:"Scroll_On_".concat(e),direction:e,impact:"scroller",root:r.references.scroll.current,scroller:r.references.scroller.current,track:r.references[nn(e)].current})})),r.references=r.props.dirList.reduce(r.referencesInit,r.references),r}return(0,u.Z)(n,[{key:"render",value:function(){return en?D.createElement("div",{className:"Scroll",ref:this.references.scroll},D.createElement("div",{className:"Scroll__Scroller",ref:this.references.scroller},this.props.children),this.props.dirList.map(this.renderScrollbar)):this.props.children}},{key:"componentDidMount",value:function(){en&&(this.instanceList=this.props.dirList.map(this.scrollInit),this.isMount=!0,this.updateOnLayoutChange())}},{key:"componentDidUpdate",value:function(){this.updateOnLayoutChange()}},{key:"update",value:function(e){e.update()}},{key:"componentWillUnmount",value:function(){this.isMount=!1,this.instanceList.forEach(this.dispose)}},{key:"dispose",value:function(e){e.dispose()}}]),n}(D.Component),ln="currentLocale",dn=(0,b.oM)({initialState:{current:"",data:{},list:[]},name:"locale",reducers:{getList:function(e,t){var n=t.payload;e.list=n.list},getMessages:function(e,t){var n=t.payload,r=n.data,o=n.language;e.data[o]=r},setCurrent:function(e,t){var n=t.payload;e.current=n}}}),fn=function(e){return e[dn.name]},mn=function(e){return fn(e).data},vn=function(e){return fn(e).list},pn=function(e){return fn(e).current},Zn=function(e){return e(x.actions.loadStart(dn.actions.getList.type)),Z.requestLocal("/api/v1/locale.json").then(f(e,dn.actions.getList)).then(N(e,dn.actions.getList.type))},bn=function(e){return function(t){return localStorage.setItem(ln,e),t(dn.actions.setCurrent(e))}},hn=function(e,t){var n=t(),r=pn(n)||localStorage.getItem(ln)||"ru";return e(bn(r))},_n=function(e){return function(t){return t(x.actions.loadStart(dn.actions.getMessages.type)),Z.requestLocal("/api/v1/locale-".concat(e,".json")).then((function(n){return f(t,dn.actions.getMessages)({data:n,language:e}),n})).then(N(t,dn.actions.getMessages.type))}},gn=function(e){return(0,r.Z)("option",{value:e},e,e)},yn=function(){var e=M(),t=L(pn),n=L(vn),o=L(mn),a=(0,D.useState)(t),i=(0,Ze.Z)(a,2),u=i[0],s=i[1],c=(0,D.useCallback)((function(e){s(e.target.value)}),[]);return(0,D.useEffect)((function(){o[u]?u!==t&&e(bn(u)):e(_n(u))}),[e,u,t,o]),(0,r.Z)("select",{className:"LocaleSelector",name:"locale",onBlur:c,onChange:c,value:u},void 0,n.map(gn))},On=function(){return rn||(rn=(0,r.Z)("div",{className:"Header"},void 0,(0,r.Z)("div",{className:"Header__Inner box"},void 0,(0,r.Z)("h1",{className:"Header__Title"},void 0,(0,r.Z)(re,{id:"app.title"})),(0,r.Z)("div",{className:"Header__Lang"},void 0,(0,r.Z)(yn,{})))))},jn=function(e){var t=e.children;return(0,r.Z)("div",{className:"Layout"},void 0,on||(on=(0,r.Z)("header",{className:"Layout__Header"},void 0,(0,r.Z)(On,{}))),(0,r.Z)("div",{className:"Layout__Scroll"},void 0,(0,r.Z)(cn,{dirList:["h","v"]},void 0,(0,r.Z)("div",{className:"Layout__Inner"},void 0,an||(an=(0,r.Z)("div",{className:"Layout__HeaderSize"})),(0,r.Z)("main",{className:"Layout__Body"},void 0,t)))))},kn=function(){return(0,r.Z)(jn,{},void 0,(0,r.Z)(De,{},void 0,(0,r.Z)(oe.Z5,{},void 0,(0,r.Z)(oe.AW,{element:un||(un=(0,r.Z)(pe,{})),path:"".concat(o,"/*")}),sn||(sn=(0,r.Z)(oe.AW,{element:(0,r.Z)(zt,{}),path:"*"})))))};function In(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?In(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):In(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Sn,Pn=(0,b.oM)({initialState:{host:""},name:"config",reducers:{update:function(e,t){var n=t.payload;return Cn(Cn({},e),n)}}}),xn=(0,n("./node_modules/redux/es/redux.js").UY)((Sn={},(0,d.Z)(Sn,Pn.name,Pn.reducer),(0,d.Z)(Sn,P.name,P.reducer),(0,d.Z)(Sn,dn.name,dn.reducer),(0,d.Z)(Sn,x.name,x.reducer),Sn)),Nn={immutableCheck:!1,serializableCheck:!1,thunk:!0},wn=(0,b.xC)({devTools:!1,middleware:function(e){return e(Nn)},reducer:xn});var En=function(e){return e[Pn.name]};function Mn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var o=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var Ln,Dn=function(e){(0,s.Z)(n,e);var t=Mn(n);function n(e){var r;return(0,i.Z)(this,n),r=t.call(this,e),(0,d.Z)((0,Kt.Z)(r),"state",void 0),e.dispatch((function(e){return e(x.actions.loadStart(Pn.actions.update.type)),Z.requestLocal("/api/v1/config.json").then(f(e,Pn.actions.update)).then(N(e,Pn.actions.update.type))})),r}return(0,u.Z)(n,[{key:"render",value:function(){return this.state?this.props.children:null}},{key:"componentDidUpdate",value:function(e){var t=this.props.config;e.config!==t&&(p.host=t.host,this.setState(t))}}]),n}(D.Component),Tn=(0,E.$j)((function(e){return{config:En(e)}}))(Dn),Vn=n("./node_modules/react-intl/lib/src/components/provider.js"),Fn=function(e){var t=e.children,n=M();(0,D.useEffect)((function(){n(Zn),n(hn)}),[n]);var o=L(pn),a=L(ue(dn.actions.getMessages.type)),i=L(function(e){return function(t){return mn(t)[e]}}(o));return(0,D.useEffect)((function(){i||a||!o||n(_n(o))}),[n,a,o,i]),i?(0,r.Z)(Vn.Z,{locale:o,messages:i},void 0,t):null},Gn=n("./node_modules/react-dom/client.js"),An=document.getElementById("root");if(An){var Rn=function(e){return function(){e.render(Ln||(Ln=(0,r.Z)(D.StrictMode,{},void 0,(0,r.Z)(E.zt,{store:wn},void 0,(0,r.Z)(Fn,{},void 0,(0,r.Z)(T.UT,{},void 0,(0,r.Z)(Tn,{},void 0,(0,r.Z)(kn,{}))))))))}}((0,Gn.s)(An));Rn()}var Bn=function(e){console.error("SW registration failed: ",e)},Wn=function(){"serviceWorker"in navigator&&navigator.serviceWorker&&navigator.serviceWorker.register("/planning-poker/sw.js").catch(Bn)};window.removeEventListener("load",Wn),window.addEventListener("load",Wn)}},o={};function a(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={id:e,loaded:!1,exports:{}};return r[e](n,n.exports,a),n.loaded=!0,n.exports}a.m=r,e=[],a.O=function(t,n,r,o){if(!n){var i=1/0;for(l=0;l<e.length;l++){n=e[l][0],r=e[l][1],o=e[l][2];for(var u=!0,s=0;s<n.length;s++)(!1&o||i>=o)&&Object.keys(a.O).every((function(e){return a.O[e](n[s])}))?n.splice(s--,1):(u=!1,o<i&&(i=o));if(u){e.splice(l--,1);var c=r();void 0!==c&&(t=c)}}return t}o=o||0;for(var l=e.length;l>0&&e[l-1][2]>o;l--)e[l]=e[l-1];e[l]=[n,r,o]},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},n=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},a.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var o=Object.create(null);a.r(o);var i={};t=t||[null,n({}),n([]),n(n)];for(var u=2&r&&e;"object"==typeof u&&!~t.indexOf(u);u=n(u))Object.getOwnPropertyNames(u).forEach((function(t){i[t]=function(){return e[t]}}));return i.default=function(){return e},a.d(o,i),o},a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){var e={main:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,o,i=n[0],u=n[1],s=n[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(r in u)a.o(u,r)&&(a.m[r]=u[r]);if(s)var l=s(a)}for(t&&t(n);c<i.length;c++)o=i[c],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(l)},n=self.webpackChunkpokerPlanner=self.webpackChunkpokerPlanner||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var i=a.O(void 0,["vendor"],(function(){return a("./src/index.tsx")}));i=a.O(i),pokerPlanner=i}();