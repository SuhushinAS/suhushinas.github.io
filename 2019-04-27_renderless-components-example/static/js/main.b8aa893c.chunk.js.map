{"version":3,"sources":["app/history.js","modules/common/components/If.jsx","modules/common/components/KeyHandler.jsx","modules/common/components/Layout.jsx","modules/map/context/MapContext.jsx","modules/map/components/GeoJSON.jsx","modules/map/components/Map.jsx","modules/map/components/TileLayer.jsx","modules/map/components/View.jsx","modules/example-map/components/ExampleMapMain.jsx","modules/example-map/components/GeoJSONField.jsx","modules/example-map/components/TileField.jsx","modules/example-map/components/ExampleMapSide.jsx","modules/example-map/components/ExampleMap.jsx","modules/centrifuge/context/SocketContext.jsx","modules/centrifuge/components/Centrifuge.jsx","modules/centrifuge/components/Subscribe.jsx","modules/map/components/Marker.jsx","modules/example-socket/components/ExampleSocketMain.jsx","modules/example-socket/components/ExampleSocket.jsx","modules/example-socket/components/SocketGenerator.jsx","app/index.jsx","serviceWorker.js","index.js"],"names":["createHashHistory","If","_ref","children","condition","KeyHandler","handlerAdd","eventName","document","addEventListener","_this","handler","handlerRemove","removeEventListener","e","keyList","props","type","keyCode","Object","keys","this","forEach","React","Component","Layout","react_default","a","createElement","className","side","main","defaultProps","MapContext","createContext","undefined","withMap","_React$Component","ComponentWithMap","_getPrototypeOf2","classCallCheck","_len","arguments","length","args","Array","_key","possibleConstructorReturn","getPrototypeOf","call","apply","concat","renderComponent","context","assign","inherits","createClass","key","value","Consumer","layerAdd","layerDelete","_this$props","geoJSON","leaflet","layer","L","GeoJSON","geometryToLayer","addLayer","removeLayer","PureComponent","Map","state","isLoad","handleLoad","setState","map","createRef","ref","Provider","current","window","remove","params","url","TileLayer","handleViewChange","onViewChange","bounds","getBounds","rectangle","toGeoJSON","setView","on","_this$props2","view","View","isValid","fitBounds","fitWorld","padding","_this$props3","invalidateSize","equals","off","ExampleMapMain","renderGeoJSON","id","components_GeoJSON","geoJSONList","tile","map_components_Map","components_TileLayer","components_View","GeoJSONField","handleChange","onChange","name","defaultChecked","htmlFor","TileField","checked","ExampleMapSide","renderGeoJSONField","example_map_components_GeoJSONField","onGeoJSONChange","showData","renderTileField","example_map_components_TileField","onTileChange","tileId","geoJSONIdList","tileIdList","Fragment","JSON","stringify","geometry","ExampleMap","filterGeoJSON","getGeoJSON","handleGeoJSONChange","objectSpread","defineProperty","handleTileChange","common_components_Layout","renderMain","renderSide","filter","components_ExampleMapMain","components_ExampleMapSide","SocketContext","Centrifuge","centrifuge","CentrifugeJS","connect","disconnect","isDisconnected","configure","connectData","removeAllListeners","secret","user","timestamp","token","getToken","hmacBody","shaObj","JsSHA","setHMACKey","update","getHMAC","Math","round","Date","now","toString","Subscribe","subscription","handleConnect","forceUpdate","handleSubscribe","eventData","subscribe","channel","unsubscribe","isConnected","withSocket","ComponentWithSocket","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","require","iconUrl","shadowUrl","point","layerUpdate","marker","coordsToLatLng","setLatLng","ExampleSocketMain","isFollow","message","data","_this$state","Path","components_Centrifuge","map_components_Marker","components_Subscribe","coordinates","ExampleSocket","components_ExampleSocketMain","Stamen","SocketGenerator","position","isFollowPoint","handlePause","timeout","clearTimeout","handleStart","tickBind","handleStop","process","handleView","toggleView","publish","setPosition","geoJSONData","tick","bind","assertThisInitialized","onClick","setTimeout","interval","routeData","example-map","component","path","example-socket","socket-generator","routeList","App","showNav","toggleNav","keydown","78","altKey","renderLink","routeId","Link","to","renderRoute","Route","Router","history","Switch","Redirect","components_KeyHandler","Boolean","location","hostname","match","ReactDOM","render","app","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.b8aa893c.chunk.js","sourcesContent":["import {createHashHistory} from 'history';\n\nexport default createHashHistory();\n","export default function If({children, condition}) {\n  return condition && children;\n}\n","import React from 'react';\n\nclass KeyHandler extends React.Component {\n  handlerAdd = (eventName) => {\n    document.addEventListener(eventName, this.handler);\n  };\n\n  handlerRemove = (eventName) => {\n    document.removeEventListener(eventName, this.handler);\n  };\n\n  handler = (e) => {\n    const {keyList} = this.props;\n    if (keyList[e.type]) {\n      if (keyList[e.type][e.keyCode]) {\n        keyList[e.type][e.keyCode](e);\n      }\n    }\n  };\n\n  render() {\n    return null;\n  }\n\n  componentDidMount() {\n    Object.keys(this.props.keyList).forEach(this.handlerAdd);\n  }\n\n  shouldComponentUpdate(props) {\n    Object.keys(this.props.keyList).forEach(this.handlerRemove);\n    Object.keys(props.keyList).forEach(this.handlerAdd);\n    return false;\n  }\n\n  componentWillUnmount() {\n    Object.keys(this.props.keyList).forEach(this.handlerRemove);\n  }\n}\n\nexport default KeyHandler;\n","import 'modules/common/components/Layout.css';\nimport React from 'react';\n\nclass Layout extends React.Component {\n  static defaultProps = {\n    main: () => <div>Main</div>,\n    side: () => <div>Side</div>,\n  };\n\n  render() {\n    return (\n      <div className=\"layout\">\n        <div className=\"layout__side\">{this.props.side}</div>\n        <div className=\"layout__main\">{this.props.main}</div>\n      </div>\n    );\n  }\n}\n\nexport default Layout;\n","import React from 'react';\n\nexport const MapContext = React.createContext(undefined);\n\nexport default function withMap(Component) {\n  return class ComponentWithMap extends React.Component {\n    renderComponent = (context) =>\n      <Component {...this.props} {...context} />;\n\n    render() {\n      return <MapContext.Consumer>{this.renderComponent}</MapContext.Consumer>;\n    }\n  };\n}\n","import L from 'leaflet';\nimport withMap from 'modules/map/context/MapContext.jsx';\nimport React from 'react';\n\nclass GeoJSON extends React.PureComponent {\n  render() {\n    return null;\n  }\n\n  componentDidMount() {\n    this.layerAdd();\n  }\n\n  componentDidUpdate() {\n    this.layerDelete();\n    this.layerAdd();\n  }\n\n  componentWillUnmount() {\n    this.layerDelete();\n  }\n\n  layerAdd() {\n    const {geoJSON, leaflet} = this.props;\n    this.layer = L.GeoJSON.geometryToLayer(geoJSON);\n    leaflet.addLayer(this.layer);\n  }\n\n  layerDelete() {\n    this.props.leaflet.removeLayer(this.layer);\n  }\n}\n\nexport default withMap(GeoJSON);\n","import L from 'leaflet';\nimport 'modules/map/components/Map.css';\nimport {MapContext} from 'modules/map/context/MapContext.jsx';\nimport React from 'react';\n\nclass Map extends React.PureComponent {\n  state = {\n    isLoad: false,\n    leaflet: undefined,\n  };\n\n  constructor(props) {\n    super(props);\n    this.map = React.createRef();\n  }\n\n  handleLoad = () => {\n    this.setState({isLoad: true});\n  };\n\n  render() {\n    return (\n      <div className=\"map\" ref={this.map}>\n        <MapContext.Provider value={this.state}>\n          {this.state.leaflet && this.props.children}\n        </MapContext.Provider>\n      </div>\n    );\n  }\n\n  componentDidMount() {\n    const leaflet = L.map(this.map.current);\n    this.setState({leaflet});\n    window.addEventListener('load', this.handleLoad);\n  }\n\n  componentWillUnmount() {\n    this.state.leaflet.remove();\n    window.removeEventListener('load', this.handleLoad);\n  }\n}\n\nexport default Map;\n","import L from 'leaflet';\nimport withMap from 'modules/map/context/MapContext.jsx';\nimport React from 'react';\n\nclass TileLayer extends React.PureComponent {\n  render() {\n    return null;\n  }\n\n  componentDidMount() {\n    this.layerAdd();\n  }\n\n  componentDidUpdate() {\n    this.layerDelete();\n    this.layerAdd();\n  }\n\n  componentWillUnmount() {\n    this.layerDelete();\n  }\n\n  layerAdd() {\n    const {leaflet, params, url} = this.props;\n    this.layer = new L.TileLayer(url, params);\n    leaflet.addLayer(this.layer);\n  }\n\n  layerDelete() {\n    this.props.leaflet.removeLayer(this.layer);\n  }\n}\n\nexport default withMap(TileLayer);\n","import L from 'leaflet';\nimport withMap from 'modules/map/context/MapContext.jsx';\nimport React from 'react';\n\nclass View extends React.Component {\n  bounds;\n\n  static getBounds(view) {\n    return L.geoJSON(view).getBounds();\n  }\n\n  handleViewChange = () => {\n    const {leaflet, onViewChange} = this.props;\n\n    if (onViewChange) {\n      const bounds = leaflet.getBounds();\n      const rectangle = L.rectangle(bounds);\n      const view = rectangle.toGeoJSON();\n      onViewChange(view);\n    }\n  };\n\n  render() {\n    return null;\n  }\n\n  componentDidMount() {\n    this.setView();\n    this.props.leaflet.on('moveend zoomend', this.handleViewChange);\n  }\n\n  setView() {\n    const {leaflet, view} = this.props;\n    const bounds = View.getBounds(view);\n    if (bounds.isValid()) {\n      leaflet.fitBounds(bounds);\n    } else {\n      leaflet.fitWorld({padding: [0, 0]});\n    }\n    this.handleViewChange()\n  }\n\n  componentDidUpdate(props) {\n    const {isLoad, view} = this.props;\n\n    if (!props.isLoad && isLoad) {\n      this.props.leaflet.invalidateSize();\n      this.setView();\n    }\n\n    if (view !== props.view) {\n      const bounds = View.getBounds(view);\n      if (bounds.isValid() && !bounds.equals(this.bounds)) {\n        this.bounds = bounds;\n        this.setView();\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.leaflet.off('moveend zoomend', this.handleViewChange);\n  }\n}\n\nexport default withMap(View);\n","import GeoJSON from 'modules/map/components/GeoJSON.jsx';\nimport Map from 'modules/map/components/Map.jsx';\nimport TileLayer from 'modules/map/components/TileLayer.jsx';\nimport View from 'modules/map/components/View.jsx';\nimport React from 'react';\n\nclass ExampleMapMain extends React.Component {\n  render() {\n    const {geoJSONList, onViewChange, tile} = this.props;\n    return (\n      <Map>\n        <TileLayer params={tile.params} url={tile.url} />\n        <View onViewChange={onViewChange} view={geoJSONList} />\n        {geoJSONList.map(this.renderGeoJSON)}\n      </Map>\n    );\n  }\n\n  renderGeoJSON = (geoJSON, id) => <GeoJSON geoJSON={geoJSON} key={id} />;\n}\n\nexport default ExampleMapMain;\n","import 'modules/example-map/components/GeoJSONField.css';\nimport React from 'react';\n\nclass GeoJSONField extends React.Component {\n  static defaultProps = {\n    onChange: () => {\n    },\n    value: {},\n  };\n\n  render() {\n    const {id, value} = this.props;\n    return (\n      <div className=\"geo-json\">\n        <input\n          id={id}\n          name=\"tile\"\n          onChange={this.handleChange}\n          defaultChecked={value[id]}\n          type=\"checkbox\"\n        />\n        <label htmlFor={id}>{id}</label>\n      </div>\n    );\n  }\n\n  handleChange = () => {\n    this.props.onChange(this.props.id);\n  };\n}\n\nexport default GeoJSONField;\n","import 'modules/example-map/components/TileField.css';\nimport React from 'react';\n\nclass TileField extends React.Component {\n  static defaultProps = {\n    onChange: () => {\n    },\n  };\n\n  render() {\n    const {id, value} = this.props;\n    return (\n      <div className=\"tile-radio\">\n        <input\n          id={id}\n          name=\"tile\"\n          onChange={this.handleChange}\n          checked={value === id}\n          type=\"radio\"\n        />\n        <label htmlFor={id}>{id}</label>\n      </div>\n    );\n  }\n\n  handleChange = () => {\n    this.props.onChange(this.props.id);\n  };\n}\n\nexport default TileField;\n","import GeoJSONField from 'modules/example-map/components/GeoJSONField.jsx';\nimport TileField from 'modules/example-map/components/TileField.jsx';\nimport React from 'react';\n\nclass ExampleMapSide extends React.Component {\n  render() {\n    const {geoJSONIdList, tileIdList, view} = this.props;\n    return (\n      <React.Fragment>\n        <fieldset>\n          <legend>Tile layer</legend>\n          {tileIdList.map(this.renderTileField)}\n        </fieldset>\n        <fieldset>\n          <legend>GeoJSON</legend>\n          {geoJSONIdList.map(this.renderGeoJSONField)}\n        </fieldset>\n        <fieldset>\n          <legend>View</legend>\n          <code>\n            {JSON.stringify(view.geometry, undefined, 2)}\n          </code>\n        </fieldset>\n      </React.Fragment>\n    );\n  }\n\n  renderGeoJSONField = (id) => (\n    <GeoJSONField\n      key={id}\n      onChange={this.props.onGeoJSONChange}\n      id={id}\n      value={this.props.showData}\n    />\n  );\n\n  renderTileField = (id) => (\n    <TileField\n      key={id}\n      onChange={this.props.onTileChange}\n      id={id}\n      value={this.props.tileId}\n    />\n  );\n}\n\nexport default ExampleMapSide;\n","import Layout from 'modules/common/components/Layout.jsx';\nimport ExampleMapMain from 'modules/example-map/components/ExampleMapMain.jsx';\nimport ExampleMapSide from 'modules/example-map/components/ExampleMapSide.jsx';\nimport geoJSON from 'modules/example-map/data/geo-json.json';\nimport tile from 'modules/example-map/data/tile-layer.json';\nimport React from 'react';\n\nconst geoJSONIdList = Object.keys(geoJSON);\nconst tileIdList = Object.keys(tile);\n\nclass ExampleMap extends React.Component {\n  state = {\n    showData: {},\n    tileId: tileIdList[0],\n    view: {},\n  };\n\n  render() {\n    return (\n      <Layout\n        main={this.renderMain()}\n        side={this.renderSide()}\n      />\n    );\n  }\n\n  renderMain() {\n    const geoJSONList = geoJSONIdList\n      .filter(this.filterGeoJSON)\n      .map(this.getGeoJSON);\n    return (\n      <ExampleMapMain\n        geoJSONList={geoJSONList}\n        onViewChange={this.handleViewChange}\n        tile={tile[this.state.tileId]}\n      />\n    );\n  }\n\n  renderSide() {\n    return (\n      <ExampleMapSide\n        geoJSONIdList={geoJSONIdList}\n        tileIdList={tileIdList}\n        onGeoJSONChange={this.handleGeoJSONChange}\n        onTileChange={this.handleTileChange}\n        showData={this.state.showData}\n        tileId={this.state.tileId}\n        view={this.state.view}\n      />\n    );\n  }\n\n  filterGeoJSON = (id) => this.state.showData[id];\n\n  getGeoJSON = (id) => geoJSON[id];\n\n  handleGeoJSONChange = (id) => {\n    this.setState((state) => ({\n      ...state,\n      showData: {\n        ...state.showData,\n        [id]: !state.showData[id],\n      },\n    }));\n  };\n\n  handleTileChange = (tileId) => {\n    this.setState({tileId});\n  };\n\n  handleViewChange = (view) => {\n    this.setState({view});\n  };\n}\n\nexport default ExampleMap;\n","import React from 'react';\n\nexport const SocketContext = React.createContext(undefined);\n\nexport default function withSocket(Component) {\n  return class ComponentWithSocket extends React.Component {\n    renderComponent = (context) =>\n      <Component {...this.props} {...context} />;\n\n    render() {\n      return <SocketContext.Consumer>{this.renderComponent}</SocketContext.Consumer>;\n    }\n  };\n}\n","import CentrifugeJS from 'centrifuge';\nimport JsSHA from 'jssha';\nimport {SocketContext} from 'modules/centrifuge/context/SocketContext.jsx';\nimport React from 'react';\n\nclass Centrifuge extends React.Component {\n  state = {\n    centrifuge: new CentrifugeJS(),\n  };\n\n  static get timestamp() {\n    return Math.round(Date.now() / 1000).toString();\n  }\n\n  get connectData() {\n    const {secret, url, user} = this.props;\n    const timestamp = Centrifuge.timestamp;\n    const token = Centrifuge.getToken(user, secret, timestamp);\n\n    return {\n      timestamp,\n      token,\n      url,\n      user,\n    };\n  }\n\n  static getToken(user, secret, timestamp) {\n    const hmacBody = `${user}${timestamp}`;\n    const shaObj = new JsSHA('SHA-256', 'TEXT');\n    shaObj.setHMACKey(secret, 'TEXT');\n    shaObj.update(hmacBody);\n    return shaObj.getHMAC('HEX');\n  }\n\n  render() {\n    return (\n      <SocketContext.Provider value={this.state}>\n        {this.props.children}\n      </SocketContext.Provider>\n    );\n  }\n\n  componentDidMount() {\n    this.connect();\n  }\n\n  componentWillUnmount() {\n    this.disconnect();\n  }\n\n  connect() {\n    const {centrifuge} = this.state;\n    if (centrifuge.isDisconnected()) {\n      centrifuge.configure(this.connectData);\n      centrifuge.connect();\n    }\n  }\n\n  disconnect() {\n    const {centrifuge} = this.state;\n    centrifuge.removeAllListeners();\n    centrifuge.disconnect();\n  }\n}\n\nexport default Centrifuge;\n","import withSocket from 'modules/centrifuge/context/SocketContext.jsx';\nimport React from 'react';\n\nclass Subscribe extends React.Component {\n  static defaultProps = {\n    eventData: {},\n  };\n\n  subscription = null;\n\n  constructor(props) {\n    super(props);\n    this.eventData = {\n      ...props.eventData,\n      subscribe: this.handleSubscribe,\n    };\n  }\n\n  handleConnect = () => {\n    this.forceUpdate();\n  };\n\n  handleSubscribe = () => {\n    if (this.subscription) {\n      const {eventData} = this.props;\n      if (eventData.subscribe) {\n        eventData.subscribe(this.subscription);\n      }\n    }\n  };\n\n  render() {\n    return null;\n  }\n\n  componentDidMount() {\n    this.props.centrifuge.on('connect', this.handleConnect);\n    this.subscribe();\n  }\n\n  shouldComponentUpdate(props) {\n    return !this.subscription || props.channel !== this.props.channel;\n  }\n\n  componentDidUpdate() {\n    this.unsubscribe();\n    this.subscribe();\n  }\n\n  componentWillUnmount() {\n    this.props.centrifuge.off('connect', this.handleConnect);\n    this.unsubscribe();\n  }\n\n  subscribe() {\n    const {centrifuge, channel} = this.props;\n    if (centrifuge.isConnected() && !this.subscription) {\n      this.subscription = centrifuge.subscribe(channel, this.eventData);\n    }\n  }\n\n  unsubscribe() {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n      this.subscription.removeAllListeners();\n      this.subscription = null;\n    }\n  }\n}\n\nexport default withSocket(Subscribe);\n","import L from 'leaflet';\nimport 'modules/map/components/Marker.css';\nimport withMap from 'modules/map/context/MapContext.jsx';\nimport React from 'react';\n\n// Фикс иконок на картах\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  className: 'marker',\n  iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\n  iconUrl: require('leaflet/dist/images/marker-icon.png'),\n  shadowUrl: require('leaflet/dist/images/marker-shadow.png'),\n});\n\nclass Marker extends React.PureComponent {\n  componentDidMount() {\n    this.layerAdd(this.props.point);\n  }\n\n  componentDidUpdate() {\n    this.layerUpdate(this.props.point);\n  }\n\n  componentWillUnmount() {\n    this.layerDelete();\n  }\n\n  layerAdd(point) {\n    if (point) {\n      this.layer = L.marker(L.GeoJSON.coordsToLatLng(point));\n      this.props.leaflet.addLayer(this.layer);\n    }\n  }\n\n  layerUpdate(point) {\n    if (point) {\n      if (this.layer) {\n        this.layer.setLatLng(L.GeoJSON.coordsToLatLng(point));\n      } else {\n        this.layerAdd(point);\n      }\n    }\n  }\n\n  layerDelete() {\n    if (this.layer) {\n      this.props.leaflet.removeLayer(this.layer);\n    }\n  }\n\n  render() {\n    return null;\n  }\n}\n\nexport default withMap(Marker);\n","import Centrifuge from 'modules/centrifuge/components/Centrifuge.jsx';\nimport Subscribe from 'modules/centrifuge/components/Subscribe.jsx';\nimport Map from 'modules/map/components/Map.jsx';\nimport Marker from 'modules/map/components/Marker.jsx';\nimport TileLayer from 'modules/map/components/TileLayer.jsx';\nimport View from 'modules/map/components/View.jsx';\nimport React from 'react';\n\nclass ExampleSocketMain extends React.Component {\n  state = {\n    isFollow: false,\n  };\n\n  eventData = {\n    message: (message) => {\n      switch (message.data.type) {\n        case 'setPoint':\n          this.setState({point: message.data.point});\n          break;\n        case 'setView':\n          this.setState((state) => ({\n            ...state,\n            isFollow: !state.isFollow,\n          }));\n          break;\n        default:\n          break;\n      }\n    },\n  };\n\n  get geoJSON() {\n    const {point} = this.state\n    if (point) {\n      return {\n        coordinates: point,\n        type: 'Point',\n      };\n    }\n    return undefined;\n  }\n\n  render() {\n    const {connect, geoJSON, tile} = this.props;\n    const {isFollow, point} = this.state;\n    const view = isFollow ? this.geoJSON : geoJSON.Path;\n    return (\n      <Centrifuge {...connect}>\n        <Map>\n          <TileLayer params={tile.params} url={tile.url} />\n          <View view={view} />\n          <Marker point={point} />\n        </Map>\n        <Subscribe channel=\"userstory+devpro\" eventData={this.eventData} />\n      </Centrifuge>\n    );\n  }\n}\n\nexport default ExampleSocketMain;\n","import geoJSON from 'modules/example-map/data/geo-json.json';\nimport tile from 'modules/example-map/data/tile-layer.json';\nimport ExampleSocketMain\n  from 'modules/example-socket/components/ExampleSocketMain.jsx';\nimport connect from 'modules/example-socket/data/connect.json';\nimport React from 'react';\n\nclass ExampleSocket extends React.Component {\n  render() {\n    return (\n      <ExampleSocketMain\n        connect={connect}\n        geoJSON={geoJSON}\n        tile={tile.Stamen}\n      />\n    );\n  }\n}\n\nexport default ExampleSocket;\n","import Centrifuge from 'modules/centrifuge/components/Centrifuge.jsx';\nimport Subscribe from 'modules/centrifuge/components/Subscribe.jsx';\nimport geoJSONData from 'modules/example-map/data/geo-json.json';\nimport connectData from 'modules/example-socket/data/connect.json';\nimport React from 'react';\n\nclass SocketGenerator extends React.Component {\n  static defaultProps = {\n    interval: 550,\n    user: 'user',\n  };\n\n  state = {\n    position: 0,\n    isFollowPoint: false,\n  };\n\n  subscription;\n\n  constructor(props) {\n    super(props);\n    this.coordinates = geoJSONData.Path.coordinates;\n    this.eventData = {\n      subscribe: this.handleSubscribe,\n    };\n    this.length = this.coordinates.length;\n    this.position = 0;\n    this.tickBind = this.tick.bind(this);\n  }\n\n  handlePause = () => {\n    if (this.timeout) {\n      clearTimeout(this.timeout);\n      this.timeout = undefined;\n    }\n  };\n\n  handleStart = () => {\n    this.tickBind();\n  };\n\n  handleStop = () => {\n    this.handlePause();\n    this.setState({position: 0});\n    this.process(0);\n  };\n\n  handleSubscribe = (subscription) => {\n    this.subscription = subscription;\n  };\n\n  handleView = () => {\n    this.setState(this.toggleView);\n  };\n\n  toggleView = (state) => {\n    const isFollowPoint = !state.isFollowPoint;\n    if (this.subscription) {\n      this.subscription.publish({\n        type: 'setView',\n        isFollowPoint,\n      });\n    }\n    return {\n      ...state,\n      isFollowPoint,\n    }\n  };\n\n  setPosition = (state) => ({\n    ...state,\n    position: state.position + 1,\n  });\n\n  render() {\n    return (\n      <div>\n        <fieldset>\n          <legend>Control</legend>\n          <button onClick={this.handleStart}>Start</button>\n          {' '}\n          <button onClick={this.handlePause}>Pause</button>\n          {' '}\n          <button onClick={this.handleStop}>Stop</button>\n          {' '}\n          <button onClick={this.handleView}>View</button>\n        </fieldset>\n        <fieldset>\n          <legend>Current</legend>\n          <code>{JSON.stringify(this.coordinates[this.state.position])}</code>\n        </fieldset>\n        <Centrifuge\n          secret={connectData.secret}\n          url={connectData.url}\n          user={this.props.user}\n        >\n          <Subscribe\n            channel=\"userstory+devpro\"\n            eventData={this.eventData}\n          />\n        </Centrifuge>\n      </div>\n    );\n  }\n\n  tick() {\n    if (this.state.position < this.length) {\n      this.timeout = setTimeout(this.tickBind, this.props.interval);\n      this.process(this.state.position);\n      this.setState(this.setPosition);\n    }\n  }\n\n  process(position) {\n    if (this.subscription) {\n      const point = this.coordinates[position];\n      this.subscription.publish({\n        type: 'setPoint',\n        point,\n      });\n    }\n  }\n}\n\nexport default SocketGenerator;\n","import history from 'app/history.js';\nimport If from 'modules/common/components/If.jsx';\nimport KeyHandler from 'modules/common/components/KeyHandler.jsx';\nimport ExampleMap from 'modules/example-map/components/ExampleMap.jsx';\nimport ExampleSocket from 'modules/example-socket/components/ExampleSocket.jsx';\nimport SocketGenerator\n  from 'modules/example-socket/components/SocketGenerator.jsx';\nimport React from 'react';\nimport {Redirect, Route, Switch} from 'react-router';\nimport {Link, Router} from 'react-router-dom';\nimport './style.css';\n\nconst routeData = {\n  'example-map': {\n    component: ExampleMap,\n    name: 'ExampleMap',\n    path: '/example-map',\n  },\n  'example-socket': {\n    component: ExampleSocket,\n    name: 'ExampleSocket',\n    path: '/example-socket',\n  },\n  'socket-generator': {\n    component: SocketGenerator,\n    name: 'SocketGenerator',\n    path: '/socket-generator',\n  },\n};\n\nconst routeList = Object.keys(routeData);\n\nclass App extends React.Component {\n  state = {\n    showNav: false,\n  };\n\n  toggleNav = (state) => ({\n    ...state,\n    showNav: !state.showNav,\n  });\n\n  keyList = {\n    keydown: {\n      78: (e) => {\n        if (e.altKey) {\n          this.setState(this.toggleNav);\n        }\n      },\n    },\n  };\n\n  render() {\n    return (\n      <Router history={history}>\n        <div className=\"app\">\n          <If condition={this.state.showNav}>\n            <div className=\"app__nav\">\n              {routeList.map(this.renderLink)}\n            </div>\n          </If>\n          <div className=\"app__content\">\n            <Switch>\n              {routeList.map(this.renderRoute)}\n              <Redirect to={routeData[routeList[0]].path} />\n            </Switch>\n          </div>\n          <KeyHandler keyList={this.keyList} />\n        </div>\n      </Router>\n    );\n  }\n\n  renderLink = (routeId) => <Link\n    className=\"app__nav-link\"\n    key={routeId}\n    to={routeData[routeId].path}\n  >{routeData[routeId].name}</Link>;\n\n  renderRoute = (routeId) => <Route\n    component={routeData[routeId].component}\n    key={routeId}\n    path={routeData[routeId].path}\n  />;\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n  // [::1] is the IPv6 localhost address.\n  window.location.hostname === '[::1]' ||\n  // 127.0.0.1/8 is considered localhost for IPv4.\n  window.location.hostname.match(\n    /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\n  ),\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log('This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA');\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log('New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA.');\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import App from 'app/index.jsx';\nimport 'index.css';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport * as serviceWorker from 'serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\nif (module.hot) {\n  module.hot.accept('app/index.jsx', () => ReactDOM.render(\n    <App />, document.getElementById('root')));\n}\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}