{"version":3,"sources":["app/history.js","modules/common/components/If.jsx","modules/common/components/KeyHandler.jsx","modules/common/components/Layout.jsx","modules/map/context/MapContext.jsx","modules/map/components/GeoJSON.jsx","modules/map/components/Map.jsx","modules/map/components/TileLayer.jsx","modules/map/components/View.jsx","modules/example-map/components/ExampleMapMain.jsx","modules/example-map/components/GeoJSONField.jsx","modules/example-map/components/TileField.jsx","modules/example-map/components/ExampleMapSide.jsx","modules/example-map/components/ExampleMap.jsx","modules/centrifuge/context/SocketContext.jsx","modules/centrifuge/components/Centrifuge.jsx","modules/centrifuge/components/Subscribe.jsx","modules/map/components/Marker.jsx","modules/example-socket/components/ExampleSocketMap.jsx","modules/example-socket/components/ExampleSocket.jsx","modules/example-socket/components/SocketGenerator.jsx","app/index.jsx","serviceWorker.js","index.js"],"names":["createHashHistory","If","_ref","children","condition","KeyHandler","handlerAdd","eventName","document","addEventListener","_this","handler","handlerRemove","removeEventListener","e","keyList","props","type","keyCode","Object","keys","this","forEach","React","Component","Layout","react_default","a","createElement","className","side","main","defaultProps","MapContext","createContext","undefined","withMap","_React$Component","ComponentWithMap","_getPrototypeOf2","classCallCheck","_len","arguments","length","args","Array","_key","possibleConstructorReturn","getPrototypeOf","call","apply","concat","renderComponent","context","assign","inherits","createClass","key","value","Consumer","layerAdd","layerDelete","_this$props","geoJSON","leaflet","layer","L","GeoJSON","geometryToLayer","addLayer","removeLayer","PureComponent","Map","state","isLoad","handleLoad","setState","map","createRef","ref","Provider","current","window","remove","params","url","TileLayer","handleViewChange","onViewChange","bounds","getBounds","rectangle","toGeoJSON","setView","on","_this$props2","view","View","isValid","fitBounds","fitWorld","padding","_this$props3","invalidateSize","equals","off","ExampleMapMain","renderGeoJSON","id","components_GeoJSON","geoJSONList","tile","map_components_Map","components_TileLayer","components_View","GeoJSONField","handleChange","onChange","name","defaultChecked","htmlFor","TileField","checked","ExampleMapSide","renderGeoJSONField","example_map_components_GeoJSONField","onGeoJSONChange","showData","renderTileField","example_map_components_TileField","onTileChange","tileId","geoJSONIdList","tileIdList","Fragment","JSON","stringify","geometry","ExampleMap","filterGeoJSON","getGeoJSON","handleGeoJSONChange","objectSpread","defineProperty","handleTileChange","common_components_Layout","renderMain","renderSide","components_ExampleMapMain","_this$state","components_ExampleMapSide","filter","SocketContext","Centrifuge","centrifuge","CentrifugeJS","connect","disconnect","isDisconnected","configure","connectData","removeAllListeners","secret","user","timestamp","token","getToken","hmacBody","shaObj","JsSHA","setHMACKey","update","getHMAC","Math","round","Date","now","toString","Subscribe","subscription","handleConnect","forceUpdate","handleSubscribe","eventData","subscribe","channel","unsubscribe","isConnected","withSocket","ComponentWithSocket","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","require","iconUrl","shadowUrl","point","layerUpdate","marker","coordsToLatLng","setLatLng","ExampleSocketMap","isFollow","message","data","Path","components_Centrifuge","map_components_Marker","components_Subscribe","coordinates","ExampleSocket","components_ExampleSocketMap","Stamen","SocketGenerator","position","isFollowPoint","handlePause","timeout","clearTimeout","handleStart","tickBind","handleStop","process","handleView","toggleView","publish","setPosition","tick","bind","assertThisInitialized","onClick","setTimeout","interval","routeData","example-map","component","path","example-socket","socket-generator","routeList","App","showNav","toggleNav","keydown","78","altKey","renderLink","_routeData$id","Link","to","renderRoute","_routeData$id2","Route","Router","history","Switch","Redirect","components_KeyHandler","Boolean","location","hostname","match","ReactDOM","render","app","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.005dfb0a.chunk.js","sourcesContent":["import {createHashHistory} from 'history';\n\nexport default createHashHistory();\n","export default function If({children, condition}) {\n  return condition && children;\n}\n","import React from 'react';\n\nclass KeyHandler extends React.Component {\n  handlerAdd = (eventName) => {\n    document.addEventListener(eventName, this.handler);\n  };\n\n  handlerRemove = (eventName) => {\n    document.removeEventListener(eventName, this.handler);\n  };\n\n  handler = (e) => {\n    const {keyList} = this.props;\n    if (keyList[e.type]) {\n      if (keyList[e.type][e.keyCode]) {\n        keyList[e.type][e.keyCode](e);\n      }\n    }\n  };\n\n  render() {\n    return null;\n  }\n\n  componentDidMount() {\n    Object.keys(this.props.keyList).forEach(this.handlerAdd);\n  }\n\n  shouldComponentUpdate(props) {\n    Object.keys(this.props.keyList).forEach(this.handlerRemove);\n    Object.keys(props.keyList).forEach(this.handlerAdd);\n    return false;\n  }\n\n  componentWillUnmount() {\n    Object.keys(this.props.keyList).forEach(this.handlerRemove);\n  }\n}\n\nexport default KeyHandler;\n","import 'modules/common/components/Layout.css';\nimport React from 'react';\n\nclass Layout extends React.Component {\n  static defaultProps = {\n    main: () => <div>Main</div>,\n    side: () => <div>Side</div>,\n  };\n\n  render() {\n    return (\n      <div className=\"layout\">\n        <div className=\"layout__side\">{this.props.side}</div>\n        <div className=\"layout__main\">{this.props.main}</div>\n      </div>\n    );\n  }\n}\n\nexport default Layout;\n","import React from 'react';\n\nexport const MapContext = React.createContext(undefined);\n\nexport default function withMap(Component) {\n  return class ComponentWithMap extends React.Component {\n    renderComponent = (context) =>\n      <Component {...this.props} {...context} />;\n\n    render() {\n      return <MapContext.Consumer>{this.renderComponent}</MapContext.Consumer>;\n    }\n  };\n}\n","import L from 'leaflet';\nimport withMap from 'modules/map/context/MapContext.jsx';\nimport React from 'react';\n\nclass GeoJSON extends React.PureComponent {\n  render() {\n    return null;\n  }\n\n  componentDidMount() {\n    this.layerAdd();\n  }\n\n  componentDidUpdate() {\n    this.layerDelete();\n    this.layerAdd();\n  }\n\n  componentWillUnmount() {\n    this.layerDelete();\n  }\n\n  layerAdd() {\n    const {geoJSON, leaflet} = this.props;\n    this.layer = L.GeoJSON.geometryToLayer(geoJSON);\n    leaflet.addLayer(this.layer);\n  }\n\n  layerDelete() {\n    this.props.leaflet.removeLayer(this.layer);\n  }\n}\n\nexport default withMap(GeoJSON);\n","import L from 'leaflet';\nimport 'modules/map/components/Map.css';\nimport {MapContext} from 'modules/map/context/MapContext.jsx';\nimport React from 'react';\n\nclass Map extends React.PureComponent {\n  state = {\n    isLoad: false,\n    leaflet: undefined,\n  };\n\n  constructor(props) {\n    super(props);\n    this.map = React.createRef();\n  }\n\n  handleLoad = () => {\n    this.setState({isLoad: true});\n  };\n\n  render() {\n    return (\n      <div className=\"map\" ref={this.map}>\n        <MapContext.Provider value={this.state}>\n          {this.state.leaflet && this.props.children}\n        </MapContext.Provider>\n      </div>\n    );\n  }\n\n  componentDidMount() {\n    const leaflet = L.map(this.map.current);\n    this.setState({leaflet});\n    window.addEventListener('load', this.handleLoad);\n  }\n\n  componentWillUnmount() {\n    this.state.leaflet.remove();\n    window.removeEventListener('load', this.handleLoad);\n  }\n}\n\nexport default Map;\n","import L from 'leaflet';\nimport withMap from 'modules/map/context/MapContext.jsx';\nimport React from 'react';\n\nclass TileLayer extends React.PureComponent {\n  render() {\n    return null;\n  }\n\n  componentDidMount() {\n    this.layerAdd();\n  }\n\n  componentDidUpdate() {\n    this.layerDelete();\n    this.layerAdd();\n  }\n\n  componentWillUnmount() {\n    this.layerDelete();\n  }\n\n  layerAdd() {\n    const {leaflet, params, url} = this.props;\n    this.layer = new L.TileLayer(url, params);\n    leaflet.addLayer(this.layer);\n  }\n\n  layerDelete() {\n    this.props.leaflet.removeLayer(this.layer);\n  }\n}\n\nexport default withMap(TileLayer);\n","import L from 'leaflet';\nimport withMap from 'modules/map/context/MapContext.jsx';\nimport React from 'react';\n\nclass View extends React.Component {\n  bounds;\n\n  static getBounds(view) {\n    return L.geoJSON(view).getBounds();\n  }\n\n  handleViewChange = () => {\n    const {leaflet, onViewChange} = this.props;\n\n    if (onViewChange) {\n      const bounds = leaflet.getBounds();\n      const rectangle = L.rectangle(bounds);\n      const view = rectangle.toGeoJSON();\n      onViewChange(view);\n    }\n  };\n\n  render() {\n    return null;\n  }\n\n  componentDidMount() {\n    this.setView();\n    this.props.leaflet.on('moveend zoomend', this.handleViewChange);\n  }\n\n  setView() {\n    const {leaflet, view} = this.props;\n    const bounds = View.getBounds(view);\n    if (bounds.isValid()) {\n      leaflet.fitBounds(bounds);\n    } else {\n      leaflet.fitWorld({padding: [0, 0]});\n    }\n    this.handleViewChange();\n  }\n\n  componentDidUpdate(props) {\n    const {isLoad, view} = this.props;\n\n    if (!props.isLoad && isLoad) {\n      this.props.leaflet.invalidateSize();\n      this.setView();\n    }\n\n    if (view !== props.view) {\n      const bounds = View.getBounds(view);\n      if (bounds.isValid() && !bounds.equals(this.bounds)) {\n        this.bounds = bounds;\n        this.setView();\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.leaflet.off('moveend zoomend', this.handleViewChange);\n  }\n}\n\nexport default withMap(View);\n","import GeoJSON from 'modules/map/components/GeoJSON.jsx';\nimport Map from 'modules/map/components/Map.jsx';\nimport TileLayer from 'modules/map/components/TileLayer.jsx';\nimport View from 'modules/map/components/View.jsx';\nimport React from 'react';\n\nclass ExampleMapMain extends React.Component {\n  render() {\n    const {geoJSONList, onViewChange, tile} = this.props;\n    return (\n      <Map>\n        <TileLayer params={tile.params} url={tile.url} />\n        <View onViewChange={onViewChange} view={geoJSONList} />\n        {geoJSONList.map(this.renderGeoJSON)}\n      </Map>\n    );\n  }\n\n  renderGeoJSON = (geoJSON, id) => <GeoJSON geoJSON={geoJSON} key={id} />;\n}\n\nexport default ExampleMapMain;\n","import 'modules/example-map/components/GeoJSONField.css';\nimport React from 'react';\n\nclass GeoJSONField extends React.Component {\n  static defaultProps = {\n    onChange: () => {\n    },\n    value: {},\n  };\n\n  render() {\n    const {id, value} = this.props;\n    return (\n      <div className=\"geo-json\">\n        <input\n          id={id}\n          name=\"tile\"\n          onChange={this.handleChange}\n          defaultChecked={value[id]}\n          type=\"checkbox\"\n        />\n        <label htmlFor={id}>{id}</label>\n      </div>\n    );\n  }\n\n  handleChange = () => {\n    this.props.onChange(this.props.id);\n  };\n}\n\nexport default GeoJSONField;\n","import 'modules/example-map/components/TileField.css';\nimport React from 'react';\n\nclass TileField extends React.Component {\n  static defaultProps = {\n    onChange: () => {\n    },\n  };\n\n  render() {\n    const {id, value} = this.props;\n    return (\n      <div className=\"tile-radio\">\n        <input\n          id={id}\n          name=\"tile\"\n          onChange={this.handleChange}\n          checked={value === id}\n          type=\"radio\"\n        />\n        <label htmlFor={id}>{id}</label>\n      </div>\n    );\n  }\n\n  handleChange = () => {\n    this.props.onChange(this.props.id);\n  };\n}\n\nexport default TileField;\n","import GeoJSONField from 'modules/example-map/components/GeoJSONField.jsx';\nimport TileField from 'modules/example-map/components/TileField.jsx';\nimport React from 'react';\n\nclass ExampleMapSide extends React.Component {\n  render() {\n    const {geoJSONIdList, tileIdList, view} = this.props;\n    return (\n      <React.Fragment>\n        <fieldset>\n          <legend>Tile layer</legend>\n          {tileIdList.map(this.renderTileField)}\n        </fieldset>\n        <fieldset>\n          <legend>GeoJSON</legend>\n          {geoJSONIdList.map(this.renderGeoJSONField)}\n        </fieldset>\n        <fieldset>\n          <legend>View</legend>\n          <code>\n            {JSON.stringify(view.geometry, undefined, 2)}\n          </code>\n        </fieldset>\n      </React.Fragment>\n    );\n  }\n\n  renderGeoJSONField = (id) => (\n    <GeoJSONField\n      key={id}\n      onChange={this.props.onGeoJSONChange}\n      id={id}\n      value={this.props.showData}\n    />\n  );\n\n  renderTileField = (id) => (\n    <TileField\n      key={id}\n      onChange={this.props.onTileChange}\n      id={id}\n      value={this.props.tileId}\n    />\n  );\n}\n\nexport default ExampleMapSide;\n","import geoJSON from 'data/geo-json.json';\nimport tile from 'data/tile.json';\nimport Layout from 'modules/common/components/Layout.jsx';\nimport ExampleMapMain from 'modules/example-map/components/ExampleMapMain.jsx';\nimport ExampleMapSide from 'modules/example-map/components/ExampleMapSide.jsx';\nimport React from 'react';\n\nconst geoJSONIdList = Object.keys(geoJSON);\nconst tileIdList = Object.keys(tile);\n\nclass ExampleMap extends React.Component {\n  state = {\n    showData: {},\n    tileId: tileIdList[0],\n    view: {},\n  };\n\n  get geoJSONList() {\n    return geoJSONIdList.filter(this.filterGeoJSON).map(this.getGeoJSON);\n  }\n\n  render() {\n    return (\n      <Layout\n        main={this.renderMain()}\n        side={this.renderSide()}\n      />\n    );\n  }\n\n  renderMain() {\n    const {tileId} = this.state;\n    return (\n      <ExampleMapMain\n        geoJSONList={this.geoJSONList}\n        onViewChange={this.handleViewChange}\n        tile={tile[tileId]}\n      />\n    );\n  }\n\n  renderSide() {\n    const {showData, tileId, view} = this.state;\n    return (\n      <ExampleMapSide\n        geoJSONIdList={geoJSONIdList}\n        tileIdList={tileIdList}\n        onGeoJSONChange={this.handleGeoJSONChange}\n        onTileChange={this.handleTileChange}\n        showData={showData}\n        tileId={tileId}\n        view={view}\n      />\n    );\n  }\n\n  filterGeoJSON = (id) => this.state.showData[id];\n\n  getGeoJSON = (id) => geoJSON[id];\n\n  handleGeoJSONChange = (id) => {\n    this.setState((state) => ({\n      ...state,\n      showData: {\n        ...state.showData,\n        [id]: !state.showData[id],\n      },\n    }));\n  };\n\n  handleTileChange = (tileId) => {\n    this.setState({tileId});\n  };\n\n  handleViewChange = (view) => {\n    this.setState({view});\n  };\n}\n\nexport default ExampleMap;\n","import React from 'react';\n\nexport const SocketContext = React.createContext(undefined);\n\nexport default function withSocket(Component) {\n  return class ComponentWithSocket extends React.Component {\n    renderComponent = (context) =>\n      <Component {...this.props} {...context} />;\n\n    render() {\n      return <SocketContext.Consumer>{this.renderComponent}</SocketContext.Consumer>;\n    }\n  };\n}\n","import CentrifugeJS from 'centrifuge';\nimport JsSHA from 'jssha';\nimport {SocketContext} from 'modules/centrifuge/context/SocketContext.jsx';\nimport React from 'react';\n\nclass Centrifuge extends React.Component {\n  state = {\n    centrifuge: new CentrifugeJS(),\n  };\n\n  static get timestamp() {\n    return Math.round(Date.now() / 1000).toString();\n  }\n\n  get connectData() {\n    const {secret, url, user} = this.props;\n    const timestamp = Centrifuge.timestamp;\n    const token = Centrifuge.getToken(user, secret, timestamp);\n\n    return {\n      timestamp,\n      token,\n      url,\n      user,\n    };\n  }\n\n  static getToken(user, secret, timestamp) {\n    const hmacBody = `${user}${timestamp}`;\n    const shaObj = new JsSHA('SHA-256', 'TEXT');\n    shaObj.setHMACKey(secret, 'TEXT');\n    shaObj.update(hmacBody);\n    return shaObj.getHMAC('HEX');\n  }\n\n  render() {\n    return (\n      <SocketContext.Provider value={this.state}>\n        {this.props.children}\n      </SocketContext.Provider>\n    );\n  }\n\n  componentDidMount() {\n    this.connect();\n  }\n\n  componentWillUnmount() {\n    this.disconnect();\n  }\n\n  connect() {\n    const {centrifuge} = this.state;\n    if (centrifuge.isDisconnected()) {\n      centrifuge.configure(this.connectData);\n      centrifuge.connect();\n    }\n  }\n\n  disconnect() {\n    const {centrifuge} = this.state;\n    centrifuge.removeAllListeners();\n    centrifuge.disconnect();\n  }\n}\n\nexport default Centrifuge;\n","import withSocket from 'modules/centrifuge/context/SocketContext.jsx';\nimport React from 'react';\n\nclass Subscribe extends React.Component {\n  static defaultProps = {\n    eventData: {},\n  };\n\n  subscription = null;\n\n  constructor(props) {\n    super(props);\n    this.eventData = {\n      ...props.eventData,\n      subscribe: this.handleSubscribe,\n    };\n  }\n\n  handleConnect = () => {\n    this.forceUpdate();\n  };\n\n  handleSubscribe = () => {\n    if (this.subscription) {\n      const {eventData} = this.props;\n      if (eventData.subscribe) {\n        eventData.subscribe(this.subscription);\n      }\n    }\n  };\n\n  render() {\n    return null;\n  }\n\n  componentDidMount() {\n    this.props.centrifuge.on('connect', this.handleConnect);\n    this.subscribe();\n  }\n\n  shouldComponentUpdate(props) {\n    return !this.subscription || props.channel !== this.props.channel;\n  }\n\n  componentDidUpdate() {\n    this.unsubscribe();\n    this.subscribe();\n  }\n\n  componentWillUnmount() {\n    this.props.centrifuge.off('connect', this.handleConnect);\n    this.unsubscribe();\n  }\n\n  subscribe() {\n    const {centrifuge, channel} = this.props;\n    if (centrifuge.isConnected() && !this.subscription) {\n      this.subscription = centrifuge.subscribe(channel, this.eventData);\n    }\n  }\n\n  unsubscribe() {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n      this.subscription.removeAllListeners();\n      this.subscription = null;\n    }\n  }\n}\n\nexport default withSocket(Subscribe);\n","import L from 'leaflet';\nimport 'modules/map/components/Marker.css';\nimport withMap from 'modules/map/context/MapContext.jsx';\nimport React from 'react';\n\n// Фикс иконок на картах\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  className: 'marker',\n  iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\n  iconUrl: require('leaflet/dist/images/marker-icon.png'),\n  shadowUrl: require('leaflet/dist/images/marker-shadow.png'),\n});\n\nclass Marker extends React.PureComponent {\n  componentDidMount() {\n    this.layerAdd(this.props.point);\n  }\n\n  componentDidUpdate() {\n    this.layerUpdate(this.props.point);\n  }\n\n  componentWillUnmount() {\n    this.layerDelete();\n  }\n\n  layerAdd(point) {\n    if (point) {\n      this.layer = L.marker(L.GeoJSON.coordsToLatLng(point));\n      this.props.leaflet.addLayer(this.layer);\n    }\n  }\n\n  layerUpdate(point) {\n    if (point) {\n      if (this.layer) {\n        this.layer.setLatLng(L.GeoJSON.coordsToLatLng(point));\n      } else {\n        this.layerAdd(point);\n      }\n    }\n  }\n\n  layerDelete() {\n    if (this.layer) {\n      this.props.leaflet.removeLayer(this.layer);\n    }\n  }\n\n  render() {\n    return null;\n  }\n}\n\nexport default withMap(Marker);\n","import Centrifuge from 'modules/centrifuge/components/Centrifuge.jsx';\nimport Subscribe from 'modules/centrifuge/components/Subscribe.jsx';\nimport Map from 'modules/map/components/Map.jsx';\nimport Marker from 'modules/map/components/Marker.jsx';\nimport TileLayer from 'modules/map/components/TileLayer.jsx';\nimport View from 'modules/map/components/View.jsx';\nimport React from 'react';\n\nclass ExampleSocketMap extends React.Component {\n  state = {\n    isFollow: false,\n  };\n\n  eventData = {\n    message: (message) => {\n      switch (message.data.type) {\n        case 'setPoint':\n          this.setState({point: message.data.point});\n          break;\n        case 'setView':\n          this.setState((state) => ({\n            ...state,\n            isFollow: !state.isFollow,\n          }));\n          break;\n        default:\n          break;\n      }\n    },\n  };\n\n  get geoJSON() {\n    const {point} = this.state;\n    if (point) {\n      return {\n        coordinates: point,\n        type: 'Point',\n      };\n    }\n    return undefined;\n  }\n\n  render() {\n    const {connect, geoJSON, tile} = this.props;\n    const {isFollow, point} = this.state;\n    const view = isFollow ? this.geoJSON : geoJSON.Path;\n    return (\n      <Centrifuge {...connect}>\n        <Map>\n          <TileLayer params={tile.params} url={tile.url} />\n          <View view={view} />\n          <Marker point={point} />\n        </Map>\n        <Subscribe channel=\"Userstory+DevPRO\" eventData={this.eventData} />\n      </Centrifuge>\n    );\n  }\n}\n\nexport default ExampleSocketMap;\n","import connect from 'data/connect.json';\nimport geoJSON from 'data/geo-json.json';\nimport tile from 'data/tile.json';\nimport ExampleSocketMap\n  from 'modules/example-socket/components/ExampleSocketMap.jsx';\nimport React from 'react';\n\nclass ExampleSocket extends React.Component {\n  render() {\n    return (\n      <ExampleSocketMap\n        connect={connect}\n        geoJSON={geoJSON}\n        tile={tile.Stamen}\n      />\n    );\n  }\n}\n\nexport default ExampleSocket;\n","import connect from 'data/connect.json';\nimport geoJSON from 'data/geo-json.json';\nimport Centrifuge from 'modules/centrifuge/components/Centrifuge.jsx';\nimport Subscribe from 'modules/centrifuge/components/Subscribe.jsx';\nimport React from 'react';\n\nconst {coordinates} = geoJSON.Path;\nconst {length} = coordinates;\n\nclass SocketGenerator extends React.Component {\n  static defaultProps = {\n    interval: 550,\n  };\n\n  state = {\n    length: 0,\n    position: 0,\n    isFollowPoint: false,\n  };\n\n  subscription;\n\n  constructor(props) {\n    super(props);\n    this.eventData = {\n      subscribe: this.handleSubscribe,\n    };\n    this.tickBind = this.tick.bind(this);\n  }\n\n  handlePause = () => {\n    if (this.timeout) {\n      clearTimeout(this.timeout);\n      this.timeout = undefined;\n    }\n  };\n\n  handleStart = () => {\n    this.tickBind();\n  };\n\n  handleStop = () => {\n    this.handlePause();\n    this.setState({position: 0});\n    this.process(0);\n  };\n\n  handleSubscribe = (subscription) => {\n    this.subscription = subscription;\n  };\n\n  handleView = () => {\n    this.setState(this.toggleView);\n  };\n\n  toggleView = (state) => {\n    const isFollowPoint = !state.isFollowPoint;\n    if (this.subscription) {\n      this.subscription.publish({\n        type: 'setView',\n        isFollowPoint,\n      });\n    }\n    return {\n      ...state,\n      isFollowPoint,\n    };\n  };\n\n  setPosition = (state) => ({\n    ...state,\n    position: state.position + 1,\n  });\n\n  render() {\n    return (\n      <div>\n        <fieldset>\n          <legend>Control</legend>\n          <button onClick={this.handleStart}>Start</button>\n          {' '}\n          <button onClick={this.handlePause}>Pause</button>\n          {' '}\n          <button onClick={this.handleStop}>Stop</button>\n          {' '}\n          <button onClick={this.handleView}>View</button>\n        </fieldset>\n        <fieldset>\n          <legend>Current</legend>\n          <code>\n            {JSON.stringify(coordinates[this.state.position])}\n          </code>\n        </fieldset>\n        <Centrifuge {...connect}>\n          <Subscribe channel=\"Userstory+DevPRO\" eventData={this.eventData} />\n        </Centrifuge>\n      </div>\n    );\n  }\n\n  tick() {\n    const {position} = this.state;\n    if (position < length) {\n      this.timeout = setTimeout(this.tickBind, this.props.interval);\n      this.process(position);\n      this.setState(this.setPosition);\n    }\n  }\n\n  process(position) {\n    if (this.subscription) {\n      const point = coordinates[position];\n      this.subscription.publish({\n        type: 'setPoint',\n        point,\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    this.handleStop();\n  }\n}\n\nexport default SocketGenerator;\n","import history from 'app/history.js';\nimport If from 'modules/common/components/If.jsx';\nimport KeyHandler from 'modules/common/components/KeyHandler.jsx';\nimport ExampleMap from 'modules/example-map/components/ExampleMap.jsx';\nimport ExampleSocket from 'modules/example-socket/components/ExampleSocket.jsx';\nimport SocketGenerator\n  from 'modules/example-socket/components/SocketGenerator.jsx';\nimport React from 'react';\nimport {Redirect, Route, Switch} from 'react-router';\nimport {Link, Router} from 'react-router-dom';\nimport './style.css';\n\nconst routeData = {\n  'example-map': {\n    component: ExampleMap,\n    name: 'ExampleMap',\n    path: '/example-map',\n  },\n  'example-socket': {\n    component: ExampleSocket,\n    name: 'ExampleSocket',\n    path: '/example-socket',\n  },\n  'socket-generator': {\n    component: SocketGenerator,\n    name: 'SocketGenerator',\n    path: '/socket-generator',\n  },\n};\n\nconst routeList = Object.keys(routeData);\n\nclass App extends React.Component {\n  state = {\n    showNav: false,\n  };\n\n  toggleNav = (state) => ({\n    ...state,\n    showNav: !state.showNav,\n  });\n\n  keyList = {\n    keydown: {\n      78: (e) => {\n        if (e.altKey) {\n          this.setState(this.toggleNav);\n        }\n      },\n    },\n  };\n\n  render() {\n    return (\n      <Router history={history}>\n        <div className=\"app\">\n          <If condition={this.state.showNav}>\n            <div className=\"app__nav\">\n              {routeList.map(this.renderLink)}\n            </div>\n          </If>\n          <div className=\"app__content\">\n            <Switch>\n              {routeList.map(this.renderRoute)}\n              <Redirect to={routeData[routeList[0]].path} />\n            </Switch>\n          </div>\n          <KeyHandler keyList={this.keyList} />\n        </div>\n      </Router>\n    );\n  }\n\n  renderLink = (id) => {\n    const {name, path} = routeData[id];\n    return <Link className=\"app__nav-link\" key={id} to={path}>{name}</Link>;\n  };\n\n  renderRoute = (id) => {\n    const {component, path} = routeData[id];\n    return <Route component={component} key={id} path={path} />;\n  };\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n  // [::1] is the IPv6 localhost address.\r\n  window.location.hostname === '[::1]' ||\r\n  // 127.0.0.1/8 is considered localhost for IPv4.\r\n  window.location.hostname.match(\r\n    /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\r\n  ),\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log('This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA');\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log('New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA.');\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log('No internet connection found. App is running in offline mode.');\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import App from 'app/index.jsx';\nimport 'index.css';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport * as serviceWorker from 'serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\nif (module.hot) {\n  module.hot.accept('app/index.jsx', () => ReactDOM.render(\n    <App />, document.getElementById('root')));\n}\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}