{"version":3,"sources":["app/history.js","modules/common/containers/If/index.jsx","modules/common/containers/KeyHandler/index.jsx","modules/common/containers/Layout/index.jsx","modules/example-map/components/GeoJSONItem/index.jsx","modules/example-map/components/TileLayerItem/index.jsx","modules/map/context/index.js","modules/map/hoc/withMap/index.jsx","modules/map/containers/GeoJSON/index.jsx","modules/map/containers/Map/index.jsx","modules/map/containers/TileLayer/index.jsx","modules/map/containers/View/index.jsx","modules/example-map/containers/ExampleMap/index.jsx","modules/centrifuge/context/index.js","modules/centrifuge/containers/Centrifuge/index.jsx","modules/centrifuge/hoc/withSocket/index.jsx","modules/centrifuge/containers/Subscribe/index.jsx","modules/map/containers/Marker/index.jsx","modules/example-socket/containers/ExampleSocket/index.jsx","modules/example-socket/containers/SocketGeneratorInner/index.jsx","modules/example-socket/containers/SocketGenerator/index.jsx","app/index.jsx","serviceWorker.js","index.js"],"names":["createHashHistory","If","_ref","children","condition","KeyHandler","handlerAdd","eventName","document","addEventListener","_this","handler","handlerRemove","removeEventListener","e","props","keyList","type","keyCode","Object","keys","this","forEach","React","Component","Layout","react_default","a","createElement","className","side","main","defaultProps","GeoJSONItem","handleChange","onChange","id","_this$props","value","htmlFor","name","defaultChecked","TileLayerItem","checked","MapContext","createContext","undefined","withMap","_React$Component","ComponentWithMap","_getPrototypeOf2","classCallCheck","_len","arguments","length","args","Array","_key","possibleConstructorReturn","getPrototypeOf","call","apply","concat","renderComponent","context","assign","inherits","createClass","key","Consumer","layerAdd","layerDelete","geoJSON","leaflet","layer","L","GeoJSON","geometryToLayer","addLayer","removeLayer","PureComponent","Map","state","isLoad","handleLoad","setState","refMap","map","handleClick","marker","latlng","toGeoJSON","console","log","JSON","stringify","ref","Provider","window","on","off","remove","params","url","TileLayer","handleViewChange","onViewChange","bounds","getBounds","rectangle","fly","_this$props2","view","View","isValid","fitBounds","fitWorld","padding","_this$props3","invalidateSize","equals","geoJSONIdList","geoJSONData","tileLayerIdList","tileLayerData","ExampleMap","showData","tileLayerId","filterGeoJSON","getGeoJSON","handleGeoJSONChange","objectSpread","defineProperty","handleTileLayerChange","renderGeoJSON","containers_GeoJSON","renderGeoJSONItem","components_GeoJSONItem","renderTileLayer","components_TileLayerItem","containers_Layout","renderMain","renderSide","geoJSONList","filter","containers_Map","containers_TileLayer","containers_View","Fragment","cols","disabled","rows","SocketContext","Centrifuge","centrifuge","CentrifugeJS","connect","isDisconnected","configure","connectData","disconnect","removeAllListeners","secret","user","timestamp","token","getToken","hmacBody","shaObj","JsSHA","setHMACKey","update","getHMAC","Math","round","Date","now","toString","withSocket","ComponentWithSocket","subscription","handleMessage","data","onMessage","handleSubscribe","eventData","message","subscribe","handleConnect","forceUpdate","channel","unsubscribe","isConnected","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","require","iconUrl","shadowUrl","setLatLng","coordsToLatLng","point","ExampleSocket","containers_Centrifuge","Stamen","renderPoint","containers_Subscribe","Marker","SocketGeneratorInner","position","setPosition","handleStart","tickBind","handlePause","timeout","clearTimeout","handleStop","process","coordinates","Path","tick","bind","assertThisInitialized","setTimeout","interval","onClick","publish","SocketGenerator","containers_SocketGeneratorInner","routeData","example-map","component","path","example-socket","socket-generator","routeList","App","showNav","handleKey","altKey","toggleNav","keydown","78","renderLink","routeId","Link","to","renderRoute","Route","Router","history","Switch","Redirect","containers_KeyHandler","Boolean","location","hostname","match","ReactDOM","render","app","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.97130fd4.chunk.js","sourcesContent":["// @flow\n\nimport {createHashHistory} from 'history';\n\nexport default createHashHistory();\n","export default function If({children, condition}) {\n  return condition && children;\n}\n","import React from 'react';\n\nclass KeyHandler extends React.Component {\n  /**\n   * Добавление слушателей нажатий клавиш.\n   * @param {string} eventName Название события.\n   * @return {undefined}\n   */\n  handlerAdd = (eventName) => {\n    document.addEventListener(eventName, this.handler);\n  };\n\n  /**\n   * Удаление слушателей нажатий клавиш.\n   * @param {string} eventName Название события.\n   * @return {undefined}\n   */\n  handlerRemove = (eventName) => {\n    document.removeEventListener(eventName, this.handler);\n  };\n\n  /**\n   * Обработчик нажатия клавиш.\n   * @param {*} e Событие.\n   * @return {function(*=)} Обработчик нажатия клавиш.\n   */\n  handler = (e) => {\n    if (this.props.keyList[e.type]) {\n      if (this.props.keyList[e.type][e.keyCode]) {\n        this.props.keyList[e.type][e.keyCode](e);\n      }\n    }\n  };\n\n  /**\n   * Компонент примонтировался.\n   * В данный момент у нас есть возможность использовать refs,\n   * а следовательно это то самое место, где мы хотели бы указать установку фокуса.\n   * Так же, таймауты, ajax-запросы и взаимодействие с другими библиотеками стоит обрабатывать здесь.\n   * @return {undefined}\n   */\n  componentDidMount() {\n    Object.keys(this.props.keyList).forEach(this.handlerAdd);\n  }\n\n  /**\n   * Вызывается сразу перед тем, как компонент будет удален из DOM.\n   * @return {undefined}\n   */\n  componentWillUnmount() {\n    Object.keys(this.props.keyList).forEach(this.handlerRemove);\n  }\n\n  /**\n   * Должен ли компонент обновиться?\n   * На самом деле, обычно реакт сам отлично разбирается.\n   * Но иногда ручное управление позволяет существенно ускорить работу в \"узких местах\".\n   * @param {*} props Новые свойства.\n   // * @param {*} nextState Новое состояние.\n   * @return {boolean} Должен ли компонент обновиться?\n   */\n  shouldComponentUpdate(props) {\n    Object.keys(this.props.keyList).forEach(this.handlerRemove);\n    Object.keys(props.keyList).forEach(this.handlerAdd);\n    return false;\n  }\n\n  /**\n   * Отображение компонента\n   * @return {*} Представление компонента.\n   */\n  render() {\n    return null;\n  }\n}\n\nexport default KeyHandler;\n","import React from 'react';\nimport './style.css';\n\nclass Layout extends React.Component {\n  /**\n   * Значения свойств по-умолчанию.\n   * https://facebook.github.io/react/docs/typechecking-with-proptypes.html\n   */\n  static defaultProps = {\n    main: () => <div>Main</div>,\n    side: () => <div>Side</div>,\n  };\n\n  /**\n   * Отображение компонента\n   * @return {*} Представление компонента.\n   */\n  render() {\n    return (\n      <div className=\"layout\">\n        <div className=\"layout__side\">{this.props.side}</div>\n        <div className=\"layout__main\">{this.props.main}</div>\n      </div>\n    );\n  }\n}\n\nexport default Layout;\n","import React from 'react';\nimport './style.css';\n\nclass GeoJSONItem extends React.Component {\n  /**\n   * Значения свойств по-умолчанию.\n   * https://facebook.github.io/react/docs/typechecking-with-proptypes.html\n   */\n  static defaultProps = {\n    onChange: () => {\n    },\n    value: {},\n  };\n\n  /**\n   * Вывести компонент.\n   * @return {*} Представление.\n   */\n  render() {\n    const {id, value} = this.props;\n    return (\n      <label className=\"geo-json\" htmlFor={id}>\n        <input id={id} name=\"tile\" onChange={this.handleChange} defaultChecked={value[id]} type=\"checkbox\" />\n        {id}\n      </label>\n    );\n  }\n\n  handleChange = () => {\n    this.props.onChange(this.props.id);\n  };\n}\n\nexport default GeoJSONItem;\n","import React from 'react';\nimport './style.css';\n\nclass TileLayerItem extends React.Component {\n  /**\n   * Значения свойств по-умолчанию.\n   * https://facebook.github.io/react/docs/typechecking-with-proptypes.html\n   */\n  static defaultProps = {\n    onChange: () => {\n    },\n  };\n\n  /**\n   * Вывести компонент.\n   * @return {*} Представление.\n   */\n  render() {\n    const {id, value} = this.props;\n    return (\n      <label className=\"tile-radio\" htmlFor={id}>\n        <input id={id} name=\"tile\" onChange={this.handleChange} checked={value === id} type=\"radio\" />\n        {id}\n      </label>\n    );\n  }\n\n  handleChange = () => {\n    this.props.onChange(this.props.id);\n  };\n}\n\nexport default TileLayerItem;\n","import React from 'react';\n\nexport const MapContext = React.createContext(undefined);\n","import {MapContext} from 'modules/map/context/index.js';\nimport React from 'react';\n\n/**\n * Передать map в компонент.\n * @param {*} Component Компонент.\n * @return {*} Компонент.\n */\nexport default function withMap(Component) {\n  return class ComponentWithMap extends React.Component {\n    /**\n     * Вывести детей.\n     * @param {number} context Контекст.\n     * @return {*} Представление.\n     */\n    renderComponent = (context) => <Component {...this.props} {...context} />;\n\n    /**\n     * Отображение компонента\n     * @return {*} Представление компонента.\n     */\n    render() {\n      return <MapContext.Consumer>{this.renderComponent}</MapContext.Consumer>;\n    }\n  };\n}\n","import L from 'leaflet';\nimport withMap from 'modules/map/hoc/withMap/index.jsx';\nimport React from 'react';\n\nclass GeoJSON extends React.PureComponent {\n  /**\n   * Компонент примонтировался.\n   * В данный момент у нас есть возможность использовать refs,\n   * а следовательно это то самое место, где мы хотели бы указать установку фокуса.\n   * Так же, таймауты, ajax-запросы и взаимодействие с другими библиотеками стоит обрабатывать здесь.\n   * @return {undefined}\n   */\n  componentDidMount() {\n    this.layerAdd(this.props);\n  }\n\n  /**\n   * Вызывается сразу после render.\n   * Не вызывается в момент первого render'а компонента.\n   * @param {*} props Предыдущие свойства.\n   // * @param {*} state Предыдущее состояние.\n   * @return {undefined}\n   */\n  componentDidUpdate(props) {\n    this.layerDelete(props);\n    this.layerAdd(this.props);\n  }\n\n  /**\n   * Вызывается сразу перед тем, как компонент будет удален из DOM.\n   * @return {undefined}\n   */\n  componentWillUnmount() {\n    this.layerDelete(this.props);\n  }\n\n  /**\n   * Добавить слой.\n   * @return {undefined}\n   */\n  layerAdd(props) {\n    const {geoJSON, leaflet} = props;\n    this.layer = L.GeoJSON.geometryToLayer(geoJSON);\n    leaflet.addLayer(this.layer);\n  }\n\n  /**\n   * Удалить слой.\n   * @return {undefined}\n   */\n  layerDelete(props) {\n    props.leaflet.removeLayer(this.layer);\n  }\n\n  /**\n   * Отображение компонента\n   * @return {*} Представление компонента.\n   */\n  render() {\n    return null;\n  }\n}\n\nexport default withMap(GeoJSON);\n","import L from 'leaflet';\nimport {MapContext} from 'modules/map/context/index.js';\nimport React from 'react';\nimport './style.css';\n\nclass Map extends React.PureComponent {\n  state = {\n    isLoad: false,\n    leaflet: undefined,\n  };\n\n  handleLoad = () => {\n    this.setState({isLoad: true});\n  };\n\n  /**\n   * Получить ref.\n   * @param {*} map ref.\n   * @return {undefined}\n   */\n  refMap = (map) => {\n    this.map = map;\n  };\n\n  /**\n   * Вывести компонент.\n   * @return {*} Представление.\n   */\n  render() {\n    return (\n      <div className=\"map\" ref={this.refMap}>\n        <MapContext.Provider value={this.state}>\n          {this.state.leaflet && this.props.children}\n        </MapContext.Provider>\n      </div>\n    );\n  }\n\n  /**\n   * Компонент примонтировался.\n   * В данный момент у нас есть возможность использовать refs,\n   * а следовательно это то самое место, где мы хотели бы указать установку фокуса.\n   * Так же, таймауты, ajax-запросы и взаимодействие с другими библиотеками стоит обрабатывать здесь.\n   * @return {undefined}\n   */\n  componentDidMount() {\n    const leaflet = L.map(this.map);\n    this.setState({leaflet});\n    window.addEventListener('load', this.handleLoad);\n    leaflet.on('click', this.handleClick);\n  }\n\n  handleClick = (e) => {\n    const geoJSON = L.marker(e.latlng).toGeoJSON();\n    console.log(JSON.stringify(geoJSON));\n  };\n\n  /**\n   * Вызывается сразу перед тем, как компонент будет удален из DOM.\n   * @return {undefined}\n   */\n  componentWillUnmount() {\n    this.state.leaflet.off('click', this.handleClick);\n    this.state.leaflet.remove();\n    this.setState({leaflet: undefined});\n    window.removeEventListener('load', this.handleLoad);\n  }\n}\n\nexport default Map;\n","import L from 'leaflet';\nimport withMap from 'modules/map/hoc/withMap/index.jsx';\nimport React from 'react';\n\nclass TileLayer extends React.PureComponent {\n  /**\n   * Отображение компонента\n   * @return {*} Представление компонента.\n   */\n  render() {\n    return null;\n  }\n\n  /**\n   * Компонент примонтировался.\n   * В данный момент у нас есть возможность использовать refs,\n   * а следовательно это то самое место, где мы хотели бы указать установку фокуса.\n   * Так же, таймауты, ajax-запросы и взаимодействие с другими библиотеками стоит обрабатывать здесь.\n   * @return {undefined}\n   */\n  componentDidMount() {\n    this.layerAdd(this.props);\n  }\n\n  /**\n   * Вызывается сразу после render.\n   * Не вызывается в момент первого render'а компонента.\n   * @param {*} props Предыдущие свойства.\n   // * @param {*} state Предыдущее состояние.\n   * @return {undefined}\n   */\n  componentDidUpdate(props) {\n    this.layerDelete(props);\n    this.layerAdd(this.props);\n  }\n\n  /**\n   * Вызывается сразу перед тем, как компонент будет удален из DOM.\n   * @return {undefined}\n   */\n  componentWillUnmount() {\n    this.layerDelete(this.props);\n  }\n\n  /**\n   * Добавить слой.\n   * @return {undefined}\n   */\n  layerAdd(props) {\n    const {leaflet, params, url} = props;\n\n    this.layer = new L.TileLayer(url, params);\n    leaflet.addLayer(this.layer);\n  }\n\n  /**\n   * Удалить слой.\n   * @return {undefined}\n   */\n  layerDelete(props) {\n    props.leaflet.removeLayer(this.layer);\n  }\n}\n\nexport default withMap(TileLayer);\n","import L from 'leaflet';\nimport withMap from \"modules/map/hoc/withMap/index.jsx\";\nimport React from 'react';\n\nclass View extends React.Component {\n  bounds;\n\n  static getBounds(view) {\n    return L.geoJSON(view).getBounds();\n  }\n\n  /**\n   * Обработать смену положения карты\n   * @return {undefined}\n   */\n  handleViewChange = () => {\n    const {leaflet, onViewChange} = this.props;\n\n    if (onViewChange) {\n      const bounds = leaflet.getBounds();\n      const rectangle = L.rectangle(bounds);\n      const view = rectangle.toGeoJSON();\n      onViewChange(view);\n    }\n  };\n\n  /**\n   * Отображение компонента\n   * @return {*} Представление компонента.\n   */\n  render() {\n    return null;\n  }\n\n  /**\n   * Компонент примонтировался.\n   * В данный момент у нас есть возможность использовать refs,\n   * а следовательно это то самое место, где мы хотели бы указать установку фокуса.\n   * Так же, таймауты, ajax-запросы и взаимодействие с другими библиотеками стоит обрабатывать здесь.\n   * @return {undefined}\n   */\n  componentDidMount() {\n    this.fly();\n    this.props.leaflet.on('moveend zoomend', this.handleViewChange);\n  }\n\n  /**\n   * Перейти к виду\n   * @return {undefined}\n   */\n  fly() {\n    const {leaflet, view} = this.props;\n    const bounds = View.getBounds(view);\n    if (bounds.isValid()) {\n      leaflet.fitBounds(bounds);\n    } else {\n      leaflet.fitWorld({padding: [0, 0]});\n    }\n  }\n\n  /**\n   * Вызывается сразу после render.\n   * Не вызывается в момент первого render'а компонента.\n   * @param {*} props - Предыдущие свойства.\n   // * @param {*} state - Предыдущее состояние.\n   * @return {undefined}\n   */\n  componentDidUpdate(props) {\n    const {isLoad, view} = this.props;\n\n    if (!props.isLoad && isLoad) {\n      this.props.leaflet.invalidateSize();\n      this.fly();\n    }\n\n    if (view !== props.view) {\n      const bounds = View.getBounds(view);\n      if (bounds.isValid() && !bounds.equals(this.bounds)) {\n        this.bounds = bounds;\n        this.fly();\n      }\n    }\n  }\n\n  /**\n   * Вызывается сразу перед тем, как компонент будет удален из DOM.\n   * @return {undefined}\n   */\n  componentWillUnmount() {\n    this.props.leaflet.off('moveend zoomend', this.handleViewChange);\n  }\n}\n\nexport default withMap(View);\n","import Layout from 'modules/common/containers/Layout/index.jsx';\nimport GeoJSONItem from \"modules/example-map/components/GeoJSONItem/index.jsx\";\nimport TileLayerItem from 'modules/example-map/components/TileLayerItem/index.jsx';\nimport geoJSONData from 'modules/example-map/data/geo-json.json';\nimport tileLayerData from 'modules/example-map/data/tile-layer.json';\nimport GeoJSON from 'modules/map/containers/GeoJSON/index.jsx';\nimport Map from \"modules/map/containers/Map/index.jsx\";\nimport TileLayer from 'modules/map/containers/TileLayer/index.jsx';\nimport View from 'modules/map/containers/View/index.jsx';\nimport React from 'react';\n\nconst geoJSONIdList = Object.keys(geoJSONData);\nconst tileLayerIdList = Object.keys(tileLayerData);\n\nclass ExampleMap extends React.Component {\n  state = {\n    showData: {},\n    tileLayerId: tileLayerIdList[0],\n    view: {},\n  };\n\n  /**\n   * Вывести компонент.\n   * @return {*} Представление.\n   */\n  render() {\n    return (\n      <Layout main={this.renderMain()} side={this.renderSide()} />\n    );\n  }\n\n  renderMain() {\n    const geoJSONList = geoJSONIdList.filter(this.filterGeoJSON).map(this.getGeoJSON);\n    return (\n      <Map>\n        <TileLayer {...tileLayerData[this.state.tileLayerId]} />\n        <View onViewChange={this.handleViewChange} view={geoJSONList} />\n        {geoJSONList.map(this.renderGeoJSON)}\n      </Map>\n    );\n  }\n\n  renderSide() {\n    return (\n      <React.Fragment>\n        <fieldset>\n          <legend>Tile layer</legend>\n          {tileLayerIdList.map(this.renderTileLayer)}\n        </fieldset>\n        <fieldset>\n          <legend>View</legend>\n          <textarea cols=\"31\"\n                    disabled\n                    id=\"view\"\n                    name=\"view\"\n                    rows=\"31\"\n                    value={JSON.stringify(this.state.view, undefined, 2)} />\n        </fieldset>\n        <fieldset>\n          <legend>GeoJSON</legend>\n          {geoJSONIdList.map(this.renderGeoJSONItem)}\n        </fieldset>\n      </React.Fragment>\n    );\n  }\n\n  filterGeoJSON = (id) => this.state.showData[id];\n\n  getGeoJSON = (id) => geoJSONData[id];\n\n  handleGeoJSONChange = (id) => {\n    this.setState((state) => ({\n      ...state,\n      showData: {\n        ...state.showData,\n        [id]: !state.showData[id],\n      },\n    }));\n  };\n\n  handleTileLayerChange = (tileLayerId) => {\n    this.setState({tileLayerId});\n  };\n\n  handleViewChange = (view) => {\n    this.setState({view});\n  };\n\n  renderGeoJSON = (geoJSON, id) => <GeoJSON geoJSON={geoJSON} key={id} />;\n\n  renderGeoJSONItem = (id) => <GeoJSONItem key={id} onChange={this.handleGeoJSONChange} id={id} value={this.state.showData} />;\n\n  renderTileLayer = (id) => <TileLayerItem key={id} onChange={this.handleTileLayerChange} id={id} value={this.state.tileLayerId} />;\n}\n\nexport default ExampleMap;\n","import React from 'react';\n\nexport const SocketContext = React.createContext(undefined);\n","import CentrifugeJS from 'centrifuge';\nimport JsSHA from 'jssha';\nimport {SocketContext} from \"modules/centrifuge/context/index.js\";\nimport React from 'react';\n\nclass Centrifuge extends React.Component {\n  state = {\n    centrifuge: new CentrifugeJS(),\n  };\n\n  static get timestamp() {\n    return Math.round(Date.now() / 1000).toString();\n  }\n\n  get connectData() {\n    const {secret, url, user} = this.props;\n    const timestamp = Centrifuge.timestamp;\n    const token = Centrifuge.getToken(user, secret, timestamp);\n\n    return {\n      timestamp,\n      token,\n      url,\n      user,\n    };\n  }\n\n  static getToken(user, secret, timestamp) {\n    const hmacBody = `${user}${timestamp}`;\n    const shaObj = new JsSHA(\"SHA-256\", \"TEXT\");\n    shaObj.setHMACKey(secret, \"TEXT\");\n    shaObj.update(hmacBody);\n    return shaObj.getHMAC(\"HEX\");\n  }\n\n  /**\n   * Отображение компонента\n   * @return {*} Представление компонента.\n   */\n  render() {\n    return (\n      <SocketContext.Provider value={this.state}>\n        {this.props.children}\n      </SocketContext.Provider>\n    );\n  }\n\n  /**\n   * Компонент примонтировался.\n   * В данный момент у нас есть возможность использовать refs,\n   * а следовательно это то самое место, где мы хотели бы указать установку фокуса.\n   * Так же, таймауты, ajax-запросы и взаимодействие с другими библиотеками стоит обрабатывать здесь.\n   * @return {undefined}\n   */\n  componentDidMount() {\n    this.connect();\n  }\n\n  connect() {\n    const {centrifuge} = this.state;\n    if (centrifuge.isDisconnected()) {\n      centrifuge.configure(this.connectData);\n      centrifuge.connect();\n    }\n  }\n\n  /**\n   * Вызывается сразу перед тем, как компонент будет удален из DOM.\n   * @return {undefined}\n   */\n  componentWillUnmount() {\n    this.disconnect();\n  }\n\n  disconnect() {\n    const {centrifuge} = this.state;\n    centrifuge.removeAllListeners();\n    centrifuge.disconnect();\n  }\n}\n\nexport default Centrifuge;\n","import {SocketContext} from 'modules/centrifuge/context/index.js';\nimport React from 'react';\n\n/**\n * Передать map в компонент.\n * @param {*} Component Компонент.\n * @return {*} Компонент.\n */\nexport default function withSocket(Component) {\n  return class ComponentWithSocket extends React.Component {\n    /**\n     * Вывести детей.\n     * @param {number} context Контекст.\n     * @return {*} Представление.\n     */\n    renderComponent = (context) => <Component {...this.props} {...context} />;\n\n    /**\n     * Отображение компонента\n     * @return {*} Представление компонента.\n     */\n    render() {\n      return <SocketContext.Consumer>{this.renderComponent}</SocketContext.Consumer>;\n    }\n  };\n}\n","import {SocketContext} from \"modules/centrifuge/context/index.js\";\nimport withSocket from \"modules/centrifuge/hoc/withSocket/index.jsx\";\nimport React from 'react';\n\nclass Subscribe extends React.Component {\n  state = {\n    subscription: undefined,\n  };\n\n  /**\n   * Обработать сообщение.\n   * @param {string} channel Канал.\n   * @param {*} data Данные.\n   * @return {undefined}\n   */\n  handleMessage = ({data}) => {\n    const {onMessage} = this.props;\n    if (onMessage) {\n      onMessage(data);\n    }\n  };\n\n  handleSubscribe = () => {\n    this.setState({subscription: this.subscription});\n  };\n\n  eventData = {\n    message: this.handleMessage,\n    subscribe: this.handleSubscribe,\n  };\n\n  /**\n   * Отображение компонента\n   * @return {*} Представление компонента.\n   */\n  render() {\n    return (\n      <SocketContext.Provider value={{\n        centrifuge: this.props.centrifuge,\n        subscription: this.subscription,\n      }}>\n        {this.props.children}\n      </SocketContext.Provider>\n    );\n  }\n\n  /**\n   * Компонент примонтировался.\n   * В данный момент у нас есть возможность использовать refs,\n   * а следовательно это то самое место, где мы хотели бы указать установку фокуса.\n   * Так же, таймауты, ajax-запросы и взаимодействие с другими библиотеками стоит обрабатывать здесь.\n   * @return {undefined}\n   */\n  componentDidMount() {\n    this.props.centrifuge.off('connect', this.handleConnect).on('connect', this.handleConnect);\n    this.subscribe();\n  }\n\n  /**\n   * Обработать подкулючение.\n   * @return {undefined}\n   */\n  handleConnect = () => {\n    this.forceUpdate();\n  };\n\n  /**\n   * Должен ли компонент обновиться?\n   * На самом деле, обычно реакт сам отлично разбирается.\n   * Но иногда ручное управление позволяет существенно ускорить работу в \"узких местах\".\n   * @param {*} props Новые свойства.\n   // * @param {*} state Новое состояние.\n   * @return {boolean} Должен ли компонент обновиться?\n   */\n  shouldComponentUpdate(props) {\n    return props.channel !== this.props.channel || !this.state.subscription;\n  }\n\n  /**\n   * Вызывается сразу после render.\n   * Не вызывается в момент первого render'а компонента.\n   // * @param {*} props Предыдущие свойства.\n   // * @param {*} state Предыдущее состояние.\n   * @return {undefined}\n   */\n  componentDidUpdate() {\n    this.unsubscribe();\n    this.subscribe();\n  }\n\n  /**\n   * Подписаться.\n   * @return {void}\n   */\n  subscribe() {\n    const {centrifuge, channel} = this.props;\n\n    if (centrifuge.isConnected() && !this.subscription) {\n      this.subscription = centrifuge.subscribe(channel, this.eventData);\n    }\n  }\n\n  /**\n   * Отписаться.\n   * @return {void}\n   */\n  unsubscribe() {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n      this.subscription.removeAllListeners();\n      this.subscription = null;\n    }\n  }\n\n  /**\n   * Вызывается сразу перед тем, как компонент будет удален из DOM.\n   * @return {undefined}\n   */\n  componentWillUnmount() {\n    this.unsubscribe();\n  }\n}\n\nexport default withSocket(Subscribe);\n","import L from 'leaflet';\nimport withMap from 'modules/map/hoc/withMap/index.jsx';\nimport React from 'react';\nimport './style.css';\n\n// Фикс иконок на картах\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  className: 'marker',\n  iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\n  iconUrl: require('leaflet/dist/images/marker-icon.png'),\n  shadowUrl: require('leaflet/dist/images/marker-shadow.png'),\n});\n\nclass GeoJSON extends React.PureComponent {\n  /**\n   * Компонент примонтировался.\n   * В данный момент у нас есть возможность использовать refs,\n   * а следовательно это то самое место, где мы хотели бы указать установку фокуса.\n   * Так же, таймауты, ajax-запросы и взаимодействие с другими библиотеками стоит обрабатывать здесь.\n   * @return {undefined}\n   */\n  componentDidMount() {\n    this.layerAdd(this.props);\n  }\n\n  /**\n   * Вызывается сразу после render.\n   * Не вызывается в момент первого render'а компонента.\n   // * @param {*} props Предыдущие свойства.\n   // * @param {*} state Предыдущее состояние.\n   * @return {undefined}\n   */\n  componentDidUpdate() {\n    this.layer.setLatLng(L.GeoJSON.coordsToLatLng(this.props.point));\n  }\n\n  /**\n   * Вызывается сразу перед тем, как компонент будет удален из DOM.\n   * @return {undefined}\n   */\n  componentWillUnmount() {\n    this.layerDelete(this.props);\n  }\n\n  /**\n   * Добавить слой.\n   * @return {undefined}\n   */\n  layerAdd(props) {\n    const {point, leaflet} = props;\n    this.layer = L.marker(L.GeoJSON.coordsToLatLng(point));\n    leaflet.addLayer(this.layer);\n  }\n\n  /**\n   * Удалить слой.\n   * @return {undefined}\n   */\n  layerDelete(props) {\n    props.leaflet.removeLayer(this.layer);\n  }\n\n  /**\n   * Отображение компонента\n   * @return {*} Представление компонента.\n   */\n  render() {\n    return null;\n  }\n}\n\nexport default withMap(GeoJSON);\n","import Centrifuge from \"modules/centrifuge/containers/Centrifuge/index.jsx\";\nimport Subscribe from 'modules/centrifuge/containers/Subscribe/index.jsx';\nimport geoJSONData from 'modules/example-map/data/geo-json.json';\nimport tileLayerData from \"modules/example-map/data/tile-layer.json\";\nimport connectData from 'modules/example-socket/data/connect.json';\nimport Map from \"modules/map/containers/Map/index.jsx\";\nimport Marker from \"modules/map/containers/Marker/index.jsx\";\nimport TileLayer from \"modules/map/containers/TileLayer/index.jsx\";\nimport View from \"modules/map/containers/View/index.jsx\";\nimport React from 'react';\n\nconst geoJSONList = Object.keys(geoJSONData).map((id) => geoJSONData[id]);\n\nclass ExampleSocket extends React.Component {\n  /**\n   * Значения свойств по-умолчанию.\n   * https://facebook.github.io/react/docs/typechecking-with-proptypes.html\n   */\n  static defaultProps = {\n    user: 'user',\n  };\n\n  state = {};\n\n  /**\n   * Вывести компонент.\n   * @return {*} Представление.\n   */\n  render() {\n    return (\n      <Centrifuge secret={connectData.secret} url={connectData.url} user={this.props.user}>\n        <Map>\n          <TileLayer {...tileLayerData.Stamen} />\n          <View view={geoJSONList} />\n          {this.renderPoint()}\n        </Map>\n        <Subscribe channel=\"userstory-to-devpro\" onMessage={this.handleMessage} />\n      </Centrifuge>\n    );\n  }\n\n  renderPoint() {\n    if (this.state.point) {\n      return <Marker point={this.state.point} />;\n    }\n  }\n\n  handleMessage = (point) => {\n    this.setState({point});\n  };\n}\n\nexport default ExampleSocket;\n","import withSocket from \"modules/centrifuge/hoc/withSocket/index.jsx\";\nimport geoJSONData from 'modules/example-map/data/geo-json.json';\nimport React from 'react';\n\nclass SocketGeneratorInner extends React.Component {\n  /**\n   * Значения свойств по-умолчанию.\n   * https://facebook.github.io/react/docs/typechecking-with-proptypes.html\n   */\n  static defaultProps = {\n    interval: 300,\n  };\n\n  state = {\n    position: 0,\n  };\n\n  /**\n   * Конструктор компонента.\n   * @param {*} props Свойства переданые в компонент.\n   * @return {undefined}\n   */\n  constructor(props) {\n    super(props);\n    this.coordinates = geoJSONData.Path.coordinates;\n    this.length = this.coordinates.length;\n    this.position = 0;\n    this.tickBind = this.tick.bind(this);\n  }\n\n  tick() {\n    if (this.state.position < this.length) {\n      this.timeout = setTimeout(this.tickBind, this.props.interval);\n      this.process(this.state.position);\n      this.setState(this.setPosition);\n    }\n  }\n\n  setPosition = (state) => ({\n    ...state,\n    position: state.position + 1,\n  });\n\n  /**\n   * Вывести компонент.\n   * @return {*} Представление.\n   */\n  render() {\n    return (\n      <div>\n        <fieldset>\n          <legend>Control</legend>\n          <button onClick={this.handleStart}>Start</button>\n          {' '}\n          <button onClick={this.handlePause}>Pause</button>\n          {' '}\n          <button onClick={this.handleStop}>Stop</button>\n        </fieldset>\n        <fieldset>\n          <legend>Current</legend>\n          <textarea disabled value={JSON.stringify(this.coordinates[this.state.position])} />\n        </fieldset>\n      </div>\n    );\n  }\n\n  handleStart = () => {\n    this.tickBind();\n  };\n\n  handlePause = () => {\n    if (this.timeout) {\n      clearTimeout(this.timeout);\n      this.timeout = undefined;\n    }\n  };\n\n  handleStop = () => {\n    this.handlePause();\n    this.setState({position: 0});\n    this.process(0);\n  };\n\n  process(position) {\n    const point = this.coordinates[position];\n    this.props.subscription.publish(point);\n  }\n}\n\nexport default withSocket(SocketGeneratorInner);\n","import Centrifuge from \"modules/centrifuge/containers/Centrifuge/index.jsx\";\nimport Subscribe from \"modules/centrifuge/containers/Subscribe/index.jsx\";\nimport SocketGeneratorInner from 'modules/example-socket/containers/SocketGeneratorInner/index.jsx';\nimport connectData from 'modules/example-socket/data/connect.json';\nimport React from 'react';\n\nclass SocketGenerator extends React.Component {\n  /**\n   * Значения свойств по-умолчанию.\n   * https://facebook.github.io/react/docs/typechecking-with-proptypes.html\n   */\n  static defaultProps = {\n    user: 'user',\n  };\n\n  /**\n   * Вывести компонент.\n   * @return {*} Представление.\n   */\n  render() {\n    return (\n      <Centrifuge secret={connectData.secret} url={connectData.url} user={this.props.user}>\n        <Subscribe channel=\"userstory-to-devpro\">\n          <SocketGeneratorInner />\n        </Subscribe>\n      </Centrifuge>\n    );\n  }\n}\n\nexport default SocketGenerator;\n","import history from 'app/history.js';\nimport If from \"modules/common/containers/If/index.jsx\";\nimport KeyHandler from \"modules/common/containers/KeyHandler/index.jsx\";\nimport ExampleMap from 'modules/example-map/containers/ExampleMap/index.jsx';\nimport ExampleSocket from \"modules/example-socket/containers/ExampleSocket/index.jsx\";\nimport SocketGenerator from \"modules/example-socket/containers/SocketGenerator/index.jsx\";\nimport React from 'react';\nimport {Redirect, Route, Switch} from \"react-router\";\nimport {Link, Router} from 'react-router-dom';\nimport './style.css';\n\nconst routeData = {\n  'example-map': {\n    component: ExampleMap,\n    name: 'ExampleMap',\n    path: '/example-map',\n  },\n  'example-socket': {\n    component: ExampleSocket,\n    name: 'ExampleSocket',\n    path: '/example-socket',\n  },\n  'socket-generator': {\n    component: SocketGenerator,\n    name: 'SocketGenerator',\n    path: '/socket-generator',\n  },\n};\n\nconst routeList = Object.keys(routeData);\n\nclass App extends React.Component {\n  state = {\n    showNav: false,\n  };\n\n  handleKey = (e) => {\n    if (e.altKey) {\n      this.setState(this.toggleNav)\n    }\n  };\n\n  keyList = {\n    keydown: {\n      78: this.handleKey,\n    },\n  };\n\n  toggleNav = (state) => ({\n    ...state,\n    showNav: !state.showNav,\n  });\n\n  render() {\n    return (\n      <Router history={history}>\n        <div className=\"app\">\n          <If condition={this.state.showNav}>\n            <div className=\"app__nav\">\n                {routeList.map(this.renderLink)}\n            </div>\n          </If>\n          <div className=\"app__content\">\n            <Switch>\n              {routeList.map(this.renderRoute)}\n              <Redirect to={routeData[routeList[0]].path} />\n            </Switch>\n          </div>\n          <KeyHandler keyList={this.keyList} />\n        </div>\n      </Router>\n    );\n  }\n\n  renderNav() {\n    return null;\n  }\n\n  renderLink = (routeId) => <Link className=\"app__nav-link\" key={routeId} to={routeData[routeId].path}>{routeData[routeId].name}</Link>;\n\n  renderRoute = (routeId) => <Route component={routeData[routeId].component} key={routeId} path={routeData[routeId].path} />;\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n  // [::1] is the IPv6 localhost address.\n  window.location.hostname === '[::1]' ||\n  // 127.0.0.1/8 is considered localhost for IPv4.\n  window.location.hostname.match(\n    /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n  )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log('This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA');\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log('New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA.');\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import App from 'app/index.jsx';\nimport 'index.css';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport * as serviceWorker from 'serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\nif (module.hot) {\n  module.hot.accept('app/index.jsx', () => ReactDOM.render(<App />, document.getElementById('root')));\n}\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}